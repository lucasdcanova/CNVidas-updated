
> rest-express@1.0.0 dev
> tsx watch server/index.ts

AuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 04:41:50.215593+00
Session table checked/created successfully
1:41:50 AM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
[API] GET /api/services - Query params: { partnerId: undefined, userCity: 'Tr√É¬™s Passos' }
[API] Buscando servi√ßos com filtro de localiza√ß√£o...
[getServicesWithLocationFilter] Iniciando busca de servi√ßos. userCity: Tr√É¬™s Passos maxDistance: 50
Session table checked/created successfully
[getServicesWithLocationFilter] Total de resultados encontrados: 12
[getServicesWithLocationFilter] Partner IDs √∫nicos: [
  12, 13, 4, 3,
   1,  5, 2
]
[getServicesWithLocationFilter] Mapeando servi√ßos...
[getServicesWithLocationFilter] Servi√ßos mapeados: 12
[getServicesWithLocationFilter] Filtrando servi√ßos por localiza√ß√£o...
[getServicesWithLocationFilter] Servi√ßos filtrados: 0
[API] Total de servi√ßos filtrados: 0
[API] Servi√ßos filtrados para cidade: Tr√É¬™s Passos
1:42:37 AM [tsx] change in ./server/utils/location-utils.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 04:42:38.826415+00
Session table checked/created successfully
1:42:39 AM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
1:42:46 AM [tsx] change in ./server/utils/location-utils.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 04:42:47.808041+00
Session table checked/created successfully
1:42:47 AM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
[API] GET /api/services - Query params: { partnerId: undefined, userCity: 'Tr√É¬™s Passos' }
[API] Buscando servi√ßos com filtro de localiza√ß√£o...
[getServicesWithLocationFilter] Iniciando busca de servi√ßos. userCity: Tr√É¬™s Passos maxDistance: 50
Session table checked/created successfully
[getServicesWithLocationFilter] Total de resultados encontrados: 12
[getServicesWithLocationFilter] Partner IDs √∫nicos: [
  12, 13, 4, 3,
   1,  5, 2
]
[getServicesWithLocationFilter] Mapeando servi√ßos...
[getServicesWithLocationFilter] Servi√ßos mapeados: 12
[getServicesWithLocationFilter] Filtrando servi√ßos por localiza√ß√£o...
[getCityCoordinates] Original: "Tr√É¬™s Passos" -> Normalizada: "Tres passos"
[getCityCoordinates] Cidade "Tres passos" n√£o encontrada nas coordenadas
[getCityCoordinates] Cidades dispon√≠veis: [ 'tres passos' ]
[getCityCoordinates] Original: "Tr√™s Passos" -> Normalizada: "tres passos"
[getCityCoordinates] Original: "Tr√É¬™s Passos" -> Normalizada: "Tres passos"
[getCityCoordinates] Cidade "Tres passos" n√£o encontrada nas coordenadas
[getCityCoordinates] Cidades dispon√≠veis: [ 'tres passos' ]
[getCityCoordinates] Original: "Crissiumal" -> Normalizada: "crissiumal"
[getCityCoordinates] Original: "Tr√É¬™s Passos" -> Normalizada: "Tres passos"
[getCityCoordinates] Cidade "Tres passos" n√£o encontrada nas coordenadas
[getCityCoordinates] Cidades dispon√≠veis: [ 'tres passos' ]
[getCityCoordinates] Original: "Tr√™s Passos" -> Normalizada: "tres passos"
[getCityCoordinates] Original: "Tr√É¬™s Passos" -> Normalizada: "Tres passos"
[getCityCoordinates] Cidade "Tres passos" n√£o encontrada nas coordenadas
[getCityCoordinates] Cidades dispon√≠veis: [ 'tres passos' ]
[getCityCoordinates] Original: "Crissiumal" -> Normalizada: "crissiumal"
[getCityCoordinates] Original: "Tr√É¬™s Passos" -> Normalizada: "Tres passos"
[getCityCoordinates] Cidade "Tres passos" n√£o encontrada nas coordenadas
[getCityCoordinates] Cidades dispon√≠veis: [ 'tres passos' ]
[getCityCoordinates] Original: "Tr√™s Passos" -> Normalizada: "tres passos"
[getCityCoordinates] Original: "Tr√É¬™s Passos" -> Normalizada: "Tres passos"
[getCityCoordinates] Cidade "Tres passos" n√£o encontrada nas coordenadas
[getCityCoordinates] Cidades dispon√≠veis: [ 'tres passos' ]
[getCityCoordinates] Original: "Tr√™s Passos" -> Normalizada: "tres passos"
[getCityCoordinates] Original: "Tr√É¬™s Passos" -> Normalizada: "Tres passos"
[getCityCoordinates] Cidade "Tres passos" n√£o encontrada nas coordenadas
[getCityCoordinates] Cidades dispon√≠veis: [ 'tres passos' ]
[getCityCoordinates] Original: "Tr√™s Passos" -> Normalizada: "tres passos"
[getCityCoordinates] Original: "Tr√É¬™s Passos" -> Normalizada: "Tres passos"
[getCityCoordinates] Cidade "Tres passos" n√£o encontrada nas coordenadas
[getCityCoordinates] Cidades dispon√≠veis: [ 'tres passos' ]
[getCityCoordinates] Original: "Tr√™s Passos" -> Normalizada: "tres passos"
[getServicesWithLocationFilter] Servi√ßos filtrados: 0
[API] Total de servi√ßos filtrados: 0
[API] Servi√ßos filtrados para cidade: Tr√É¬™s Passos
1:43:41 AM [tsx] change in ./server/utils/location-utils.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 04:43:42.869872+00
Session table checked/created successfully
1:43:43 AM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
[API] GET /api/services - Query params: { partnerId: undefined, userCity: 'Tr√É¬™s Passos' }
[API] Buscando servi√ßos com filtro de localiza√ß√£o...
[getServicesWithLocationFilter] Iniciando busca de servi√ßos. userCity: Tr√É¬™s Passos maxDistance: 50
Session table checked/created successfully
[getServicesWithLocationFilter] Total de resultados encontrados: 12
[getServicesWithLocationFilter] Partner IDs √∫nicos: [
  12, 13, 4, 3,
   1,  5, 2
]
[getServicesWithLocationFilter] Mapeando servi√ßos...
[getServicesWithLocationFilter] Servi√ßos mapeados: 12
[getServicesWithLocationFilter] Filtrando servi√ßos por localiza√ß√£o...
[getCityCoordinates] Original: "Tr√É¬™s Passos" -> Normalizada: "tres passos"
[getCityCoordinates] Original: "Tr√™s Passos" -> Normalizada: "tres passos"
[getCityCoordinates] Original: "Tr√É¬™s Passos" -> Normalizada: "tres passos"
[getCityCoordinates] Original: "Crissiumal" -> Normalizada: "crissiumal"
[getCityCoordinates] Original: "Tr√É¬™s Passos" -> Normalizada: "tres passos"
[getCityCoordinates] Original: "Tr√™s Passos" -> Normalizada: "tres passos"
[getCityCoordinates] Original: "Tr√É¬™s Passos" -> Normalizada: "tres passos"
[getCityCoordinates] Original: "Crissiumal" -> Normalizada: "crissiumal"
[getCityCoordinates] Original: "Tr√É¬™s Passos" -> Normalizada: "tres passos"
[getCityCoordinates] Original: "Tr√™s Passos" -> Normalizada: "tres passos"
[getCityCoordinates] Original: "Tr√É¬™s Passos" -> Normalizada: "tres passos"
[getCityCoordinates] Original: "Tr√™s Passos" -> Normalizada: "tres passos"
[getCityCoordinates] Original: "Tr√É¬™s Passos" -> Normalizada: "tres passos"
[getCityCoordinates] Original: "Tr√™s Passos" -> Normalizada: "tres passos"
[getCityCoordinates] Original: "Tr√É¬™s Passos" -> Normalizada: "tres passos"
[getCityCoordinates] Original: "Tr√™s Passos" -> Normalizada: "tres passos"
[getServicesWithLocationFilter] Servi√ßos filtrados: 8
[API] Total de servi√ßos filtrados: 8
[API] Servi√ßos filtrados para cidade: Tr√É¬™s Passos
[API] Exemplo de servi√ßo: {
  id: 6,
  name: 'Atendimento psicol√≥gico',
  isNational: false,
  distance: 0,
  serviceImage: 'Tem imagem',
  partner: 'Tem parceiro'
}
1:44:22 AM [tsx] change in ./server/utils/location-utils.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 04:44:24.233238+00
Session table checked/created successfully
1:44:24 AM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
1:45:04 AM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 04:45:05.43596+00
Session table checked/created successfully
1:45:05 AM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
1:45:22 AM [tsx] change in ./server/routes/index.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 04:45:23.531036+00
Session table checked/created successfully
1:45:23 AM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
Session table checked/created successfully
[getServicesWithLocationFilter] Erro geral na fun√ß√£o: error: column partners.profile_image does not exist
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/@neondatabase/serverless/index.js:1086:33
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async NeonPreparedQuery.execute (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/neon-serverless/session.ts:61:18)
    at async DatabaseStorage.getServicesWithLocationFilter (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/storage.ts:1401:23)
    at async <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts:182:26) {
  length: 121,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '918',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3716',
  routine: 'errorMissingColumn'
}
Erro ao buscar servi√ßos: Error: Erro ao buscar servi√ßos: column partners.profile_image does not exist
    at DatabaseStorage.getServicesWithLocationFilter (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/storage.ts:1530:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts:182:26)
1:46:08 AM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 04:46:09.517099+00
Session table checked/created successfully
1:46:09 AM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
1:46:24 AM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 04:46:25.737666+00
Session table checked/created successfully
1:46:25 AM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
Session table checked/created successfully
[getServicesWithLocationFilter] Erro geral na fun√ß√£o: error: column partners.profile_image does not exist
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/@neondatabase/serverless/index.js:1086:33
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async NeonPreparedQuery.execute (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/neon-serverless/session.ts:61:18)
    at async DatabaseStorage.getServicesWithLocationFilter (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/storage.ts:1401:23)
    at async <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts:182:26) {
  length: 121,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '918',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3716',
  routine: 'errorMissingColumn'
}
Erro ao buscar servi√ßos: Error: Erro ao buscar servi√ßos: column partners.profile_image does not exist
    at DatabaseStorage.getServicesWithLocationFilter (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/storage.ts:1526:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts:182:26)
1:47:30 AM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 04:47:31.245321+00
Session table checked/created successfully
1:47:31 AM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
Session table checked/created successfully
[getServicesWithLocationFilter] Erro geral na fun√ß√£o: error: column "profile_image" does not exist
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/@neondatabase/serverless/index.js:1086:33
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async NeonPreparedQuery.execute (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/neon-serverless/session.ts:61:18)
    at async DatabaseStorage.getServicesWithLocationFilter (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/storage.ts:1412:30)
    at async <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts:182:26) {
  length: 114,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '222',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3716',
  routine: 'errorMissingColumn'
}
Erro ao buscar servi√ßos: Error: Erro ao buscar servi√ßos: column "profile_image" does not exist
    at DatabaseStorage.getServicesWithLocationFilter (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/storage.ts:1520:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts:182:26)
1:47:57 AM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 04:47:58.123292+00
Session table checked/created successfully
1:47:58 AM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
Session table checked/created successfully
[getServicesWithLocationFilter] Erro geral na fun√ß√£o: error: invalid input syntax for type integer: "12,13,4,3,1,5,2"
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/@neondatabase/serverless/index.js:1086:33
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async NeonPreparedQuery.execute (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/neon-serverless/session.ts:61:18)
    at async DatabaseStorage.getServicesWithLocationFilter (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/storage.ts:1412:30)
    at async <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts:182:26) {
  length: 158,
  severity: 'ERROR',
  code: '22P02',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: "unnamed portal parameter $1 = '...'",
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'numutils.c',
  line: '616',
  routine: 'pg_strtoint32_safe'
}
Erro ao buscar servi√ßos: Error: Erro ao buscar servi√ßos: invalid input syntax for type integer: "12,13,4,3,1,5,2"
    at DatabaseStorage.getServicesWithLocationFilter (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/storage.ts:1543:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts:182:26)
1:48:32 AM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 04:48:33.690637+00
Session table checked/created successfully
1:48:33 AM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
1:48:37 AM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 04:48:38.900943+00
Session table checked/created successfully
1:48:39 AM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
Session table checked/created successfully
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  __stripe_mid: '1861aef6-543f-4483-ab4b-09818dff49e4c5183e',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5NDIzNzk3LCJleHAiOjE3NTAwMjg1OTd9.etqRBoYdkIPLS5kwKiqUgwNtgw9hLmU8KLwGC2lTe34',
  __stripe_sid: '7c40b497-1ceb-4182-820a-71f532e8cd44f0b120'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 58,
  email: 'lucas.canova@hotmail.com',
  role: 'patient',
  iat: 1749423797,
  exp: 1750028597
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
‚ö†Ô∏è Arquivo de upload n√£o encontrado: /profiles/profile-1749872528273-906009943.jpg
üîÑ Redirecionando para imagem padr√£o: /profiles/profile-1749872528273-906009943.jpg
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: lucas.canova@hotmail.com
üîç Buscando assinatura atual para usu√°rio lucas.canova@hotmail.com (ID: 58)
‚úÖ Notifications /unread-count - Contagem: 2
‚úÖ Assinatura encontrada:
   - ID: 1
   - Status: active
   - Plano: ultra_family
   - Data cria√ß√£o: Sun Jun 08 2025 20:10:30 GMT-0300 (Brasilia Standard Time)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /recent-activities
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Activities - Buscando atividades recentes do usu√°rio ID: 58
Encontradas 1 consultas pr√≥ximas
‚úÖ Activities - Atividades encontradas: 9
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
‚ö†Ô∏è Arquivo de upload n√£o encontrado: /profile-1747876767178-948110885.jpg
üîÑ Redirecionando para imagem padr√£o: /profile-1747876767178-948110885.jpg
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
‚ö†Ô∏è Arquivo de upload n√£o encontrado: /profile-1747951137232-694756185.jpg
üîÑ Redirecionando para imagem padr√£o: /profile-1747951137232-694756185.jpg
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para POST /108/cancel
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Cancelando consulta #108 pelo usu√°rio 58
Verificando permiss√£o de cancelamento - Paciente userId: 58, appointment.userId: 58
Consulta #108 cancelada com sucesso
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
Encontradas 1 consultas pr√≥ximas
10:22:57 AM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 13:22:58.959211+00
Session table checked/created successfully
10:22:59 AM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
10:23:04 AM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 13:23:06.211542+00
Session table checked/created successfully
10:23:06 AM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
10:30:24 AM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 13:30:26.805528+00
Session table checked/created successfully
10:30:27 AM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
10:35:29 AM [tsx] change in ./server/routes/appointment-join.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 13:35:31.514709+00
Session table checked/created successfully
10:35:31 AM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
10:36:02 AM [tsx] change in ./server/routes/appointment-join.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 13:36:04.022273+00
Session table checked/created successfully
10:36:04 AM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê requireAuth - Verificando autentica√ß√£o para GET /debug/108
üîê requireAuth - req.user: undefined
‚ùå requireAuth - Usu√°rio n√£o autenticado para GET /debug/108
11:16:28 AM [tsx] change in ./server/routes/appointment-join.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 14:16:30.027979+00
Session table checked/created successfully
11:16:30 AM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando claims para usu√°rio 58
Encontrados 0 claims
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
‚ö†Ô∏è Arquivo de upload n√£o encontrado: /profile-1747876767178-948110885.jpg
üîÑ Redirecionando para imagem padr√£o: /profile-1747876767178-948110885.jpg
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
‚ö†Ô∏è Arquivo de upload n√£o encontrado: /profile-1747951137232-694756185.jpg
üîÑ Redirecionando para imagem padr√£o: /profile-1747951137232-694756185.jpg
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-14
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-14
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-15
‚ÑπÔ∏è Doctor /:id/availability - Nenhum slot dispon√≠vel para o dia 6
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-16
‚ÑπÔ∏è Doctor /:id/availability - Nenhum slot dispon√≠vel para o dia 0
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-17
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-17
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-18
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-18
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-19
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-19
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-20
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-20
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-21
‚úÖ Doctor /:id/availability - 2 hor√°rios dispon√≠veis para 2025-06-21
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-22
‚ÑπÔ∏è Doctor /:id/availability - Nenhum slot dispon√≠vel para o dia 6
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-23
‚ÑπÔ∏è Doctor /:id/availability - Nenhum slot dispon√≠vel para o dia 0
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-24
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-24
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-25
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-25
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-26
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-26
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-27
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-27
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para POST /
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para POST /
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
Total de consultas encontradas para usu√°rio 58: 6
Consulta ID: 107, Status: waiting, Date: 2025-06-13T22:28:18.014Z
Consulta ID: 109, Status: waiting, Date: 2025-06-14T03:52:32.964Z
Consulta ID: 110, Status: waiting, Date: 2025-06-14T03:53:19.495Z
Consulta ID: 108, Status: cancelled, Date: 2025-06-20T20:30:00.000Z
Consulta ID: 111, Status: waiting, Date: 2025-06-14T04:30:10.704Z
Consulta ID: 112, Status: waiting, Date: 2025-06-14T13:21:19.557Z
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
Total de consultas encontradas para usu√°rio 58: 6
Consulta ID: 107, Status: waiting, Date: 2025-06-13T22:28:18.014Z
Consulta ID: 109, Status: waiting, Date: 2025-06-14T03:52:32.964Z
Consulta ID: 110, Status: waiting, Date: 2025-06-14T03:53:19.495Z
Consulta ID: 108, Status: cancelled, Date: 2025-06-20T20:30:00.000Z
Consulta ID: 111, Status: waiting, Date: 2025-06-14T04:30:10.704Z
Consulta ID: 112, Status: waiting, Date: 2025-06-14T13:21:19.557Z
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
Total de consultas encontradas para usu√°rio 58: 6
Consulta ID: 107, Status: waiting, Date: 2025-06-13T22:28:18.014Z
Consulta ID: 109, Status: waiting, Date: 2025-06-14T03:52:32.964Z
Consulta ID: 110, Status: waiting, Date: 2025-06-14T03:53:19.495Z
Consulta ID: 108, Status: cancelled, Date: 2025-06-20T20:30:00.000Z
Consulta ID: 111, Status: waiting, Date: 2025-06-14T04:30:10.704Z
Consulta ID: 112, Status: waiting, Date: 2025-06-14T13:21:19.557Z
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
Total de consultas encontradas para usu√°rio 58: 6
Consulta ID: 107, Status: waiting, Date: 2025-06-13T22:28:18.014Z
Consulta ID: 109, Status: waiting, Date: 2025-06-14T03:52:32.964Z
Consulta ID: 110, Status: waiting, Date: 2025-06-14T03:53:19.495Z
Consulta ID: 108, Status: cancelled, Date: 2025-06-20T20:30:00.000Z
Consulta ID: 111, Status: waiting, Date: 2025-06-14T04:30:10.704Z
Consulta ID: 112, Status: waiting, Date: 2025-06-14T13:21:19.557Z
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
Total de consultas encontradas para usu√°rio 58: 6
Consulta ID: 107, Status: waiting, Date: 2025-06-13T22:28:18.014Z
Consulta ID: 109, Status: waiting, Date: 2025-06-14T03:52:32.964Z
Consulta ID: 110, Status: waiting, Date: 2025-06-14T03:53:19.495Z
Consulta ID: 108, Status: cancelled, Date: 2025-06-20T20:30:00.000Z
Consulta ID: 111, Status: waiting, Date: 2025-06-14T04:30:10.704Z
Consulta ID: 112, Status: waiting, Date: 2025-06-14T13:21:19.557Z
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
Total de consultas encontradas para usu√°rio 58: 6
Consulta ID: 107, Status: waiting, Date: 2025-06-13T22:28:18.014Z
Consulta ID: 109, Status: waiting, Date: 2025-06-14T03:52:32.964Z
Consulta ID: 110, Status: waiting, Date: 2025-06-14T03:53:19.495Z
Consulta ID: 108, Status: cancelled, Date: 2025-06-20T20:30:00.000Z
Consulta ID: 111, Status: waiting, Date: 2025-06-14T04:30:10.704Z
Consulta ID: 112, Status: waiting, Date: 2025-06-14T13:21:19.557Z
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
Total de consultas encontradas para usu√°rio 58: 6
Consulta ID: 107, Status: waiting, Date: 2025-06-13T22:28:18.014Z
Consulta ID: 109, Status: waiting, Date: 2025-06-14T03:52:32.964Z
Consulta ID: 110, Status: waiting, Date: 2025-06-14T03:53:19.495Z
Consulta ID: 108, Status: cancelled, Date: 2025-06-20T20:30:00.000Z
Consulta ID: 111, Status: waiting, Date: 2025-06-14T04:30:10.704Z
Consulta ID: 112, Status: waiting, Date: 2025-06-14T13:21:19.557Z
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
Total de consultas encontradas para usu√°rio 58: 6
Consulta ID: 107, Status: waiting, Date: 2025-06-13T22:28:18.014Z
Consulta ID: 109, Status: waiting, Date: 2025-06-14T03:52:32.964Z
Consulta ID: 110, Status: waiting, Date: 2025-06-14T03:53:19.495Z
Consulta ID: 108, Status: cancelled, Date: 2025-06-20T20:30:00.000Z
Consulta ID: 111, Status: waiting, Date: 2025-06-14T04:30:10.704Z
Consulta ID: 112, Status: waiting, Date: 2025-06-14T13:21:19.557Z
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
Total de consultas encontradas para usu√°rio 58: 6
Consulta ID: 107, Status: waiting, Date: 2025-06-13T22:28:18.014Z
Consulta ID: 109, Status: waiting, Date: 2025-06-14T03:52:32.964Z
Consulta ID: 110, Status: waiting, Date: 2025-06-14T03:53:19.495Z
Consulta ID: 108, Status: cancelled, Date: 2025-06-20T20:30:00.000Z
Consulta ID: 111, Status: waiting, Date: 2025-06-14T04:30:10.704Z
Consulta ID: 112, Status: waiting, Date: 2025-06-14T13:21:19.557Z
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
‚úÖ Notifications /unread-count - Contagem: 2
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
‚ö†Ô∏è Arquivo de upload n√£o encontrado: /profiles/profile-1749872528273-906009943.jpg
üîÑ Redirecionando para imagem padr√£o: /profiles/profile-1749872528273-906009943.jpg
Total de consultas encontradas para usu√°rio 58: 6
Consulta ID: 107, Status: waiting, Date: 2025-06-13T22:28:18.014Z
Consulta ID: 109, Status: waiting, Date: 2025-06-14T03:52:32.964Z
Consulta ID: 110, Status: waiting, Date: 2025-06-14T03:53:19.495Z
Consulta ID: 108, Status: cancelled, Date: 2025-06-20T20:30:00.000Z
Consulta ID: 111, Status: waiting, Date: 2025-06-14T04:30:10.704Z
Consulta ID: 112, Status: waiting, Date: 2025-06-14T13:21:19.557Z
Session table checked/created successfully
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç M√©dico selecionado para emerg√™ncia: {
  doctorId: 4,
  doctorUserId: 32,
  doctorName: 'Lucas Dickel Canova',
  availableForEmergency: true
}
üöÄ Criando sala de emerg√™ncia: emergency-58-1749911912354
‚û°Ô∏è Criando sala emergency-58-1749911912354 no Daily.co - API key: true
üîç Verificando se sala "emergency-58-1749911912354" j√° existe...
Sala "emergency-58-1749911912354" n√£o existe, ser√° criada
üÜï Criando nova sala "emergency-58-1749911912354" no Daily.co...
Payload para cria√ß√£o da sala: {"name":"emergency-58-1749911912354","properties":{"start_audio_off":false,"start_video_off":false,"enable_chat":true,"enable_screenshare":true,"enable_knocking":false,"enable_network_ui":true,"enable_prejoin_ui":false,"exp":1749915513}}
‚úÖ Sala "emergency-58-1749911912354" criada com sucesso
‚è≥ Aguardando primeira fase de propaga√ß√£o (5s)...
üîç Verificando se sala "emergency-58-1749911912354" j√° est√° acess√≠vel...
‚úÖ Sala "emergency-58-1749911912354" confirmada como acess√≠vel
‚è≥ Aguardando propaga√ß√£o adicional da sala...
Criando token para sala emergency-58-1749911912354
Verificando/criando sala emergency-58-1749911912354 antes de gerar token
‚û°Ô∏è Criando sala emergency-58-1749911912354 no Daily.co - API key: true
üîç Verificando se sala "emergency-58-1749911912354" j√° existe...
‚úÖ Sala "emergency-58-1749911912354" j√° existe no Daily.co
Sala emergency-58-1749911912354 verificada/criada com sucesso
Solicitando token com propriedades: {
  room_name: 'emergency-58-1749911912354',
  user_id: '58',
  user_name: 'Lucas Dickel Canova',
  exp: 1749919122,
  is_owner: false,
  enable_screenshare: true,
  start_video_off: false,
  start_audio_off: false
}
Token simplificado criado com sucesso: eyJhbGciOiJIUzI...
‚úÖ Consulta de emerg√™ncia criada: {
  appointmentId: 113,
  doctorId: 4,
  userId: 58,
  status: 'waiting',
  isEmergency: true,
  type: 'telemedicine'
}
Consulta de emerg√™ncia iniciada: Paciente Lucas Dickel Canova (ID: 58) com Dr. Lucas Dickel Canova (ID: 4), Sala: emergency-58-1749911912354
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üìã Consulta de emerg√™ncia 113 consultada por paciente 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
Total de consultas encontradas para usu√°rio 58: 7
Consulta ID: 107, Status: waiting, Date: 2025-06-13T22:28:18.014Z
Consulta ID: 109, Status: waiting, Date: 2025-06-14T03:52:32.964Z
Consulta ID: 110, Status: waiting, Date: 2025-06-14T03:53:19.495Z
Consulta ID: 108, Status: cancelled, Date: 2025-06-20T20:30:00.000Z
Consulta ID: 111, Status: waiting, Date: 2025-06-14T04:30:10.704Z
Consulta ID: 113, Status: waiting, Date: 2025-06-14T14:38:42.478Z
Consulta ID: 112, Status: waiting, Date: 2025-06-14T13:21:19.557Z
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-14
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-14
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-15
‚ÑπÔ∏è Doctor /:id/availability - Nenhum slot dispon√≠vel para o dia 6
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-16
‚ÑπÔ∏è Doctor /:id/availability - Nenhum slot dispon√≠vel para o dia 0
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-17
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-17
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-18
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-18
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-19
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-19
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-20
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-20
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-21
‚úÖ Doctor /:id/availability - 2 hor√°rios dispon√≠veis para 2025-06-21
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-22
‚ÑπÔ∏è Doctor /:id/availability - Nenhum slot dispon√≠vel para o dia 6
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-23
‚ÑπÔ∏è Doctor /:id/availability - Nenhum slot dispon√≠vel para o dia 0
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-24
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-24
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-25
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-25
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-26
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-26
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-27
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-27
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
Erro ao criar inten√ß√£o de pagamento para consulta: AppError: Voc√™ precisa ter um m√©todo de pagamento cadastrado para realizar consultas
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-payment-routes.ts:53:13)
    at Layer.handle [as handle_request] (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/route.js:149:13)
    at requireAuth (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-payment-routes.ts:23:3)
    at Layer.handle [as handle_request] (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/layer.js:95:5)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/index.js:346:12) {
  statusCode: 400,
  status: 'fail',
  isOperational: true
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /profile
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  __stripe_mid: '1861aef6-543f-4483-ab4b-09818dff49e4c5183e',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5NDIzNzk3LCJleHAiOjE3NTAwMjg1OTd9.etqRBoYdkIPLS5kwKiqUgwNtgw9hLmU8KLwGC2lTe34',
  __stripe_sid: 'eef2774e-af26-49a7-811a-5102c64c468cf2c09d'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 58,
  email: 'lucas.canova@hotmail.com',
  role: 'patient',
  iat: 1749423797,
  exp: 1750028597
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: lucas.canova@hotmail.com
üîç Buscando assinatura atual para usu√°rio lucas.canova@hotmail.com (ID: 58)
‚úÖ Assinatura encontrada:
   - ID: 1
   - Status: active
   - Plano: ultra_family
   - Data cria√ß√£o: Sun Jun 08 2025 20:10:30 GMT-0300 (Brasilia Standard Time)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /recent-activities
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Activities - Buscando atividades recentes do usu√°rio ID: 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
‚úÖ Activities - Atividades encontradas: 9
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  __stripe_mid: '1861aef6-543f-4483-ab4b-09818dff49e4c5183e',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5NDIzNzk3LCJleHAiOjE3NTAwMjg1OTd9.etqRBoYdkIPLS5kwKiqUgwNtgw9hLmU8KLwGC2lTe34'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 58,
  email: 'lucas.canova@hotmail.com',
  role: 'patient',
  iat: 1749423797,
  exp: 1750028597
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: lucas.canova@hotmail.com
üîç Buscando assinatura atual para usu√°rio lucas.canova@hotmail.com (ID: 58)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
‚úÖ Assinatura encontrada:
   - ID: 1
   - Status: active
   - Plano: ultra_family
   - Data cria√ß√£o: Sun Jun 08 2025 20:10:30 GMT-0300 (Brasilia Standard Time)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
4:04:40 PM [tsx] change in ./shared/schema.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 19:04:41.987377+00
Session table checked/created successfully
4:04:42 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
4:05:26 PM [tsx] change in ./shared/schema.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 19:05:28.454742+00
Session table checked/created successfully
4:05:28 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
4:05:46 PM [tsx] change in ./shared/schema.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 19:05:47.663848+00
Session table checked/created successfully
4:05:47 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
4:07:29 PM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 19:07:30.486986+00
Session table checked/created successfully
4:07:30 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
Logout realizado com sucesso - cookies removidos
=== ROTA /api/user INTERCEPTADA ===
=== ROTA /api/user INTERCEPTADA ===
=== ROTA /api/login INTERCEPTADA ===
=== ROTA LOGIN CHAMADA ===
URL: /login
Method: POST
Body: { email: 'dr@lucascanova.com', password: 'qweasdzxc123' }
Buscando usu√°rio no banco: dr@lucascanova.com
Iniciando query no banco de dados...
Query executada, resultado: 1 usu√°rios encontrados
Usu√°rio encontrado: true
Verificando senha com bcrypt
Login bem-sucedido para: dr@lucascanova.com
Cookie options: {
  host: 'localhost:8080',
  isLocalhost: true,
  isProduction: false,
  secure: false,
  domain: undefined
}
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /profile
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /profile - Buscando perfil do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
‚úÖ Doctor /profile - Perfil encontrado: 4
üîç Doctor /appointments - Total de consultas: 8
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 7
üîç Doctor /appointments - Consultas de emerg√™ncia: 6
üîç Doctor /appointments - Consultas com status waiting: 6
‚úÖ Doctor /appointments - Consultas encontradas: 7
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /profile
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /profile - Buscando perfil do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
‚úÖ Doctor /profile - Perfil encontrado: 4
üîç Doctor /appointments - Total de consultas: 8
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 7
üîç Doctor /appointments - Consultas de emerg√™ncia: 6
üîç Doctor /appointments - Consultas com status waiting: 6
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /user/32
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /user/:userId - Buscando m√©dico para user ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
‚ö†Ô∏è Arquivo de upload n√£o encontrado: /profiles/profile-1747876767178-948110885.jpg
üîÑ Redirecionando para imagem padr√£o: /profiles/profile-1747876767178-948110885.jpg
‚úÖ Doctor /appointments - Consultas encontradas: 7
‚úÖ Doctor /user/:userId - M√©dico encontrado: 4
‚úÖ Notifications /unread-count - Contagem: 45
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
‚ö†Ô∏è Arquivo de upload n√£o encontrado: /profiles/profile-1749872528273-906009943.jpg
üîÑ Redirecionando para imagem padr√£o: /profiles/profile-1749872528273-906009943.jpg
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
‚ö†Ô∏è Arquivo de upload n√£o encontrado: /profile-1747876767178-948110885.jpg
üîÑ Redirecionando para imagem padr√£o: /profile-1747876767178-948110885.jpg
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 8
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 7
üîç Doctor /appointments - Consultas de emerg√™ncia: 6
üîç Doctor /appointments - Consultas com status waiting: 6
‚úÖ Doctor /appointments - Consultas encontradas: 7
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîç Doctor /appointments - Total de consultas: 8
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 7
üîç Doctor /appointments - Consultas de emerg√™ncia: 6
üîç Doctor /appointments - Consultas com status waiting: 6
‚úÖ Doctor /appointments - Consultas encontradas: 7
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para DELETE /113
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
Delete consulta - Usu√°rio 32 (Lucas Dickel Canova, role: doctor) tentando excluir consulta
Usu√°rio 32 (Lucas Dickel Canova) excluindo consulta #113
Consulta encontrada: {
  id: 113,
  userId: 58,
  doctorId: 4,
  type: 'telemedicine',
  status: 'waiting',
  isEmergency: true
}
Verificando permiss√£o de exclus√£o - M√©dico userId: 32, doctorId: 4, appointment.doctorId: 4
Permiss√£o de exclus√£o: true para usu√°rio 32 (doctor)
Consulta #113 exclu√≠da com sucesso
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 7
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 6
üîç Doctor /appointments - Consultas de emerg√™ncia: 5
üîç Doctor /appointments - Consultas com status waiting: 5
‚úÖ Doctor /appointments - Consultas encontradas: 6
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para DELETE /112
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
Delete consulta - Usu√°rio 32 (Lucas Dickel Canova, role: doctor) tentando excluir consulta
Usu√°rio 32 (Lucas Dickel Canova) excluindo consulta #112
Consulta encontrada: {
  id: 112,
  userId: 58,
  doctorId: 4,
  type: 'telemedicine',
  status: 'waiting',
  isEmergency: true
}
Verificando permiss√£o de exclus√£o - M√©dico userId: 32, doctorId: 4, appointment.doctorId: 4
Permiss√£o de exclus√£o: true para usu√°rio 32 (doctor)
Consulta #112 exclu√≠da com sucesso
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 6
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 5
üîç Doctor /appointments - Consultas de emerg√™ncia: 4
üîç Doctor /appointments - Consultas com status waiting: 4
‚úÖ Doctor /appointments - Consultas encontradas: 5
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para DELETE /111
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
Delete consulta - Usu√°rio 32 (Lucas Dickel Canova, role: doctor) tentando excluir consulta
Usu√°rio 32 (Lucas Dickel Canova) excluindo consulta #111
Consulta encontrada: {
  id: 111,
  userId: 58,
  doctorId: 4,
  type: 'telemedicine',
  status: 'waiting',
  isEmergency: true
}
Verificando permiss√£o de exclus√£o - M√©dico userId: 32, doctorId: 4, appointment.doctorId: 4
Permiss√£o de exclus√£o: true para usu√°rio 32 (doctor)
Consulta #111 exclu√≠da com sucesso
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 5
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 4
üîç Doctor /appointments - Consultas de emerg√™ncia: 3
üîç Doctor /appointments - Consultas com status waiting: 3
‚úÖ Doctor /appointments - Consultas encontradas: 4
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para DELETE /110
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
Delete consulta - Usu√°rio 32 (Lucas Dickel Canova, role: doctor) tentando excluir consulta
Usu√°rio 32 (Lucas Dickel Canova) excluindo consulta #110
Consulta encontrada: {
  id: 110,
  userId: 58,
  doctorId: 4,
  type: 'telemedicine',
  status: 'waiting',
  isEmergency: true
}
Verificando permiss√£o de exclus√£o - M√©dico userId: 32, doctorId: 4, appointment.doctorId: 4
Permiss√£o de exclus√£o: true para usu√°rio 32 (doctor)
Consulta #110 exclu√≠da com sucesso
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 4
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 3
üîç Doctor /appointments - Consultas de emerg√™ncia: 2
üîç Doctor /appointments - Consultas com status waiting: 2
‚úÖ Doctor /appointments - Consultas encontradas: 3
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para DELETE /109
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
Delete consulta - Usu√°rio 32 (Lucas Dickel Canova, role: doctor) tentando excluir consulta
Usu√°rio 32 (Lucas Dickel Canova) excluindo consulta #109
Consulta encontrada: {
  id: 109,
  userId: 58,
  doctorId: 4,
  type: 'telemedicine',
  status: 'waiting',
  isEmergency: true
}
Verificando permiss√£o de exclus√£o - M√©dico userId: 32, doctorId: 4, appointment.doctorId: 4
Permiss√£o de exclus√£o: true para usu√°rio 32 (doctor)
Consulta #109 exclu√≠da com sucesso
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 3
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 2
üîç Doctor /appointments - Consultas de emerg√™ncia: 1
üîç Doctor /appointments - Consultas com status waiting: 1
‚úÖ Doctor /appointments - Consultas encontradas: 2
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para DELETE /107
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
Delete consulta - Usu√°rio 32 (Lucas Dickel Canova, role: doctor) tentando excluir consulta
Usu√°rio 32 (Lucas Dickel Canova) excluindo consulta #107
Consulta encontrada: {
  id: 107,
  userId: 58,
  doctorId: 4,
  type: 'telemedicine',
  status: 'waiting',
  isEmergency: true
}
Verificando permiss√£o de exclus√£o - M√©dico userId: 32, doctorId: 4, appointment.doctorId: 4
Permiss√£o de exclus√£o: true para usu√°rio 32 (doctor)
Consulta #107 exclu√≠da com sucesso
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
4:08:48 PM [tsx] change in ./server/storage.ts Restarting...
cnode:internal/modules/run_main:129
    triggerUncaughtException(
    ^

Error: Transform failed with 1 error:
/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/storage.ts:1575:8: ERROR: Expected ";" but found "createMedicalRecord"
    at failureErrorWithLog (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/node_modules/esbuild/lib/main.js:1463:15)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/node_modules/esbuild/lib/main.js:734:50
    at responseCallbacks.<computed> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/node_modules/esbuild/lib/main.js:601:9)
    at handleIncomingPacket (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/node_modules/esbuild/lib/main.js:656:12)
    at Socket.readFromStdout (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/node_modules/esbuild/lib/main.js:579:7)
    at Socket.emit (node:events:519:28)
    at addChunk (node:internal/streams/readable:559:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)
    at Readable.push (node:internal/streams/readable:390:5)
    at Pipe.onStreamRead (node:internal/stream_base_commons:191:23) {
  name: 'TransformError'
}

Node.js v20.18.0
4:08:59 PM [tsx] change in ./server/storage.ts Rerunning...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 19:09:01.216378+00
Session table checked/created successfully
4:09:01 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
4:11:02 PM [tsx] change in ./server/routes/index.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 19:11:04.216793+00
Session table checked/created successfully
4:11:04 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
4:11:28 PM [tsx] change in ./server/routes/index.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 19:11:29.916072+00
Session table checked/created successfully
4:11:30 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /consultations/history
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /consultations/history - Buscando hist√≥rico do m√©dico ID: 32
‚úÖ Doctor /consultations/history - Encontradas 1 consultas
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /payments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /payments - Buscando pagamentos do m√©dico ID: 32
‚úÖ Doctor /payments - Pagamentos encontrados: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /availability
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /availability - Buscando disponibilidade do m√©dico ID: 32
‚úÖ Doctor /availability - Disponibilidade encontrada: 15
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /consultations/history
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /consultations/history - Buscando hist√≥rico do m√©dico ID: 32
‚úÖ Doctor /consultations/history - Encontradas 1 consultas
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /consultations/history
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /consultations/history - Buscando hist√≥rico do m√©dico ID: 32
‚úÖ Doctor /consultations/history - Encontradas 1 consultas
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /profile
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /user/32
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /user/:userId - Buscando m√©dico para user ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
‚úÖ Doctor /user/:userId - M√©dico encontrado: 4
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
Imagem antiga removida: /uploads/profile-1747876767178-948110885.jpg
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /user/32
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /user/:userId - Buscando m√©dico para user ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /profile
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
‚úÖ Doctor /user/:userId - M√©dico encontrado: 4
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /consultations/history
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /consultations/history - Buscando hist√≥rico do m√©dico ID: 32
‚úÖ Doctor /consultations/history - Encontradas 1 consultas
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /user/32
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /user/:userId - Buscando m√©dico para user ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /profile
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /profile
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /user/32
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /user/:userId - Buscando m√©dico para user ID: 32
‚úÖ Doctor /user/:userId - M√©dico encontrado: 4
‚úÖ Doctor /user/:userId - M√©dico encontrado: 4
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
‚ö†Ô∏è Arquivo de upload n√£o encontrado: /profiles/doctor-profile-1749928468716-764016332.jpg
üîÑ Redirecionando para imagem padr√£o: /profiles/doctor-profile-1749928468716-764016332.jpg
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /consultations/history
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /consultations/history - Buscando hist√≥rico do m√©dico ID: 32
‚úÖ Doctor /consultations/history - Encontradas 1 consultas
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /profile
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /profile - Buscando perfil do m√©dico ID: 32
‚úÖ Doctor /profile - Perfil encontrado: 4
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /consultations/history
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /consultations/history - Buscando hist√≥rico do m√©dico ID: 32
‚úÖ Doctor /consultations/history - Encontradas 1 consultas
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
Logout realizado com sucesso - cookies removidos
=== ROTA /api/user INTERCEPTADA ===
=== ROTA /api/user INTERCEPTADA ===
=== ROTA /api/register INTERCEPTADA ===
Registro - dados recebidos: {
  email: 'dasndl@ddopqw.com',
  username: 'CRMSP23453',
  password: '666666',
  fullName: 'Moares Moreira Campos',
  role: 'doctor',
  acceptTerms: true,
  acceptPrivacy: true
}
Usu√°rio criado com sucesso: { id: 94, email: 'dasndl@ddopqw.com' }
Salvas 2 aceita√ß√µes de documentos legais para usu√°rio 94
‚úÖ Notifica√ß√£o de boas-vindas criada para usu√°rio: 94
Cookie options: {
  host: 'localhost:8080',
  isLocalhost: true,
  isProduction: false,
  secure: false,
  domain: undefined
}
üîê JWT: Usu√°rio dasndl@ddopqw.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 94 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 94 (doctor)
Buscando consultas pr√≥ximas para usu√°rio 94
üîê JWT: Usu√°rio dasndl@ddopqw.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dasndl@ddopqw.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /recent-activities
üîê requireAuth - req.user: 94 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 94 (doctor)
üîç Activities - Buscando atividades recentes do usu√°rio ID: 94
üîê JWT: Usu√°rio dasndl@ddopqw.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 94 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 94 (doctor)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 94
Total de consultas encontradas para usu√°rio 94: 0
Session table checked/created successfully
‚úÖ Notifications /unread-count - Contagem: 1
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
‚úÖ Activities - Atividades encontradas: 2
üîê JWT: Usu√°rio dasndl@ddopqw.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dasndl@ddopqw.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 94 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 94 (doctor)
Buscando consultas pr√≥ximas para usu√°rio 94
üîê JWT: Usu√°rio dasndl@ddopqw.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dasndl@ddopqw.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /recent-activities
üîê requireAuth - req.user: 94 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 94 (doctor)
üîç Activities - Buscando atividades recentes do usu√°rio ID: 94
üîê JWT: Usu√°rio dasndl@ddopqw.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /user/94
üîê requireAuth - req.user: 94 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 94 (doctor)
üîç Doctor /user/:userId - Buscando m√©dico para user ID: 94
üîê JWT: Usu√°rio dasndl@ddopqw.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 94 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 94 (doctor)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 94
Total de consultas encontradas para usu√°rio 94: 0
‚ùå Doctor /user/:userId - M√©dico n√£o encontrado para user ID: 94
‚úÖ Notifications /unread-count - Contagem: 1
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
‚úÖ Activities - Atividades encontradas: 2
üîê JWT: Usu√°rio dasndl@ddopqw.com autenticado via cookie com plano free
Logout realizado com sucesso - cookies removidos
=== ROTA /api/user INTERCEPTADA ===
=== ROTA /api/user INTERCEPTADA ===
=== ROTA /api/register INTERCEPTADA ===
Registro - dados recebidos: {
  email: 'mdewmpod@domda.com',
  username: 'p25628704091',
  password: '666666',
  fullName: 'Moreira Moreira Moreira',
  role: 'patient',
  cpf: '256.287.040-91',
  acceptTerms: true,
  acceptPrivacy: true,
  acceptContract: true
}
Usu√°rio criado com sucesso: { id: 95, email: 'mdewmpod@domda.com' }
Salvas 3 aceita√ß√µes de documentos legais para usu√°rio 95
‚úÖ Notifica√ß√£o de boas-vindas criada para usu√°rio: 95
Cookie options: {
  host: 'localhost:8080',
  isLocalhost: true,
  isProduction: false,
  secure: false,
  domain: undefined
}
üîê JWT: Usu√°rio mdewmpod@domda.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 95 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 95 (patient)
Buscando consultas pr√≥ximas para usu√°rio 95
üîê JWT: Usu√°rio mdewmpod@domda.com autenticado via cookie com plano free
Total de consultas encontradas para usu√°rio 95: 0
üîê JWT: Usu√°rio mdewmpod@domda.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /recent-activities
üîê requireAuth - req.user: 95 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 95 (patient)
üîç Activities - Buscando atividades recentes do usu√°rio ID: 95
üîê JWT: Usu√°rio mdewmpod@domda.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 95 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 95 (patient)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 95
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
‚úÖ Notifications /unread-count - Contagem: 1
‚úÖ Activities - Atividades encontradas: 2
üîê JWT: Usu√°rio mdewmpod@domda.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  __stripe_mid: 'b0c0e0f0-a60a-4beb-9ff0-ffd71baa378442c2f5',
  __stripe_sid: '5aa98bf7-651e-4b7d-a683-51f3be350ba6a91e3f',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjk1LCJlbWFpbCI6Im1kZXdtcG9kQGRvbWRhLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTI4NjYyLCJleHAiOjE3NTA1MzM0NjJ9.8Rt0Jr1kNi6NZ1i9fRBV6WvhVYGeic_gzbL5XnC3YrQ'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 95,
  email: 'mdewmpod@domda.com',
  role: 'patient',
  iat: 1749928662,
  exp: 1750533462
}
üîê JWT: Usu√°rio mdewmpod@domda.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 95 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 95 (patient)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 95
üîê JWT: Usu√°rio mdewmpod@domda.com autenticado via cookie com plano free
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: mdewmpod@domda.com
üîç Buscando assinatura atual para usu√°rio mdewmpod@domda.com (ID: 95)
‚úÖ Notifications /unread-count - Contagem: 1
‚ö†Ô∏è Nenhuma assinatura encontrada para mdewmpod@domda.com. Retornando null para for√ßar onboarding.
üîê JWT: Usu√°rio mdewmpod@domda.com autenticado via cookie com plano free
Retornando planos de assinatura para usu√°rio (rota p√∫blica): [
  {
    id: 4,
    name: 'free',
    displayName: 'Gratuito',
    price: 0,
    emergencyConsultations: '0',
    specialistDiscount: 0,
    insuranceCoverage: false,
    features: [
      'Acesso ao marketplace',
      'Pagamento integral pelos servi√ßos',
      '0 teleconsultas de emerg√™ncia por m√™s',
      'Sem descontos e sem cobertura de seguro'
    ],
    isDefault: true,
    createdAt: 2025-05-19T14:54:18.234Z,
    updatedAt: 2025-05-19T14:54:18.234Z
  },
  {
    id: 5,
    name: 'basic',
    displayName: 'B√°sico',
    price: 8990,
    emergencyConsultations: '2',
    specialistDiscount: 30,
    insuranceCoverage: true,
    features: [
      '2 teleconsultas de emerg√™ncia por m√™s',
      '30% de desconto com especialistas',
      'Acesso completo aos descontos de parceiros',
      'Cobertura de seguro: R$ 300/dia de interna√ß√£o',
      'Suporte 24/7'
    ],
    isDefault: false,
    createdAt: 2025-05-19T14:54:18.234Z,
    updatedAt: 2025-05-19T14:54:18.234Z
  },
  {
    id: 6,
    name: 'premium',
    displayName: 'Premium',
    price: 12990,
    emergencyConsultations: 'unlimited',
    specialistDiscount: 50,
    insuranceCoverage: true,
    features: [
      'Teleconsultas de emerg√™ncia ilimitadas',
      '50% de desconto com especialistas',
      'Prioridade de agendamento',
      'Cobertura de seguro: R$ 300/dia de interna√ß√£o',
      'Suporte priorit√°rio 24/7'
    ],
    isDefault: false,
    createdAt: 2025-05-19T14:54:18.234Z,
    updatedAt: 2025-05-19T14:54:18.234Z
  },
  {
    id: 7,
    name: 'basic_family',
    displayName: 'B√°sico Familiar',
    price: 14990,
    emergencyConsultations: '2',
    specialistDiscount: 30,
    insuranceCoverage: true,
    features: [
      'Mesmos benef√≠cios do B√°sico para cada dependente',
      'At√© 4 CPFs',
      '2 teleconsultas de emerg√™ncia por m√™s',
      '30% de desconto com especialistas',
      'Acesso completo aos descontos de parceiros',
      'Cobertura de seguro: R$ 300/dia de interna√ß√£o',
      'Suporte 24/7'
    ],
    isDefault: false,
    createdAt: 2025-05-20T02:56:59.709Z,
    updatedAt: 2025-05-20T02:56:59.709Z
  },
  {
    id: 8,
    name: 'premium_family',
    displayName: 'Premium Familiar',
    price: 19990,
    emergencyConsultations: 'unlimited',
    specialistDiscount: 50,
    insuranceCoverage: true,
    features: [
      'Mesmos benef√≠cios do Premium para cada dependente',
      'At√© 4 CPFs',
      'Teleconsultas de emerg√™ncia ilimitadas',
      '50% de desconto com especialistas',
      'Prioridade de agendamento',
      'Cobertura de seguro: R$ 300/dia de interna√ß√£o',
      'Suporte priorit√°rio 24/7'
    ],
    isDefault: false,
    createdAt: 2025-05-20T02:56:59.709Z,
    updatedAt: 2025-05-20T02:56:59.709Z
  },
  {
    id: 9,
    name: 'ultra',
    displayName: 'Ultra',
    price: 16990,
    emergencyConsultations: 'unlimited',
    specialistDiscount: 70,
    insuranceCoverage: true,
    features: [
      'Teleconsultas de emerg√™ncia ilimitadas',
      '70% de desconto com especialistas',
      'Prioridade m√°xima de agendamento',
      'Cobertura de seguro: R$ 500/dia de interna√ß√£o',
      'Todos os demais benef√≠cios dos planos anteriores'
    ],
    isDefault: false,
    createdAt: 2025-05-20T02:56:59.709Z,
    updatedAt: 2025-05-20T02:56:59.709Z
  },
  {
    id: 10,
    name: 'ultra_family',
    displayName: 'Ultra Familiar',
    price: 23990,
    emergencyConsultations: 'unlimited',
    specialistDiscount: 70,
    insuranceCoverage: true,
    features: [
      'Mesmos benef√≠cios do Ultra para cada dependente',
      'At√© 4 CPFs',
      'Teleconsultas de emerg√™ncia ilimitadas',
      '70% de desconto com especialistas',
      'Prioridade m√°xima de agendamento',
      'Cobertura de seguro: R$ 500/dia de interna√ß√£o',
      'Todos os demais benef√≠cios dos planos anteriores'
    ],
    isDefault: false,
    createdAt: 2025-05-20T02:56:59.709Z,
    updatedAt: 2025-05-20T02:56:59.709Z
  }
]
üîê JWT: Usu√°rio mdewmpod@domda.com autenticado via cookie com plano free
‚úÖ Notifica√ß√£o de checkout criada para usu√°rio: 95
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  __stripe_mid: 'b0c0e0f0-a60a-4beb-9ff0-ffd71baa378442c2f5',
  __stripe_sid: '5aa98bf7-651e-4b7d-a683-51f3be350ba6a91e3f',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjk1LCJlbWFpbCI6Im1kZXdtcG9kQGRvbWRhLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTI4NjYyLCJleHAiOjE3NTA1MzM0NjJ9.8Rt0Jr1kNi6NZ1i9fRBV6WvhVYGeic_gzbL5XnC3YrQ'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 95,
  email: 'mdewmpod@domda.com',
  role: 'patient',
  iat: 1749928662,
  exp: 1750533462
}
üîê JWT: Usu√°rio mdewmpod@domda.com autenticado via cookie com plano ultra
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: mdewmpod@domda.com
üîç Buscando assinatura atual para usu√°rio mdewmpod@domda.com (ID: 95)
üîê JWT: Usu√°rio mdewmpod@domda.com autenticado via cookie com plano ultra
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 95 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 95 (patient)
Buscando consultas pr√≥ximas para usu√°rio 95
üîê JWT: Usu√°rio mdewmpod@domda.com autenticado via cookie com plano ultra
üîê JWT: Usu√°rio mdewmpod@domda.com autenticado via cookie com plano ultra
üîê requireAuth - Verificando autentica√ß√£o para GET /recent-activities
üîê requireAuth - req.user: 95 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 95 (patient)
üîç Activities - Buscando atividades recentes do usu√°rio ID: 95
‚ö†Ô∏è Nenhuma assinatura encontrada para mdewmpod@domda.com. Retornando null para for√ßar onboarding.
Total de consultas encontradas para usu√°rio 95: 0
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
‚úÖ Activities - Atividades encontradas: 4
üîê JWT: Usu√°rio mdewmpod@domda.com autenticado via cookie com plano ultra
üîê requireAuth - Verificando autentica√ß√£o para GET /profile
üîê requireAuth - req.user: 95 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 95 (patient)
üîê JWT: Usu√°rio mdewmpod@domda.com autenticado via cookie com plano ultra
üîê JWT: Usu√°rio mdewmpod@domda.com autenticado via cookie com plano ultra
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  __stripe_mid: 'b0c0e0f0-a60a-4beb-9ff0-ffd71baa378442c2f5',
  __stripe_sid: '5aa98bf7-651e-4b7d-a683-51f3be350ba6a91e3f',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjk1LCJlbWFpbCI6Im1kZXdtcG9kQGRvbWRhLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTI4NjYyLCJleHAiOjE3NTA1MzM0NjJ9.8Rt0Jr1kNi6NZ1i9fRBV6WvhVYGeic_gzbL5XnC3YrQ'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 95,
  email: 'mdewmpod@domda.com',
  role: 'patient',
  iat: 1749928662,
  exp: 1750533462
}
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  __stripe_mid: 'b0c0e0f0-a60a-4beb-9ff0-ffd71baa378442c2f5',
  __stripe_sid: '5aa98bf7-651e-4b7d-a683-51f3be350ba6a91e3f',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjk1LCJlbWFpbCI6Im1kZXdtcG9kQGRvbWRhLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTI4NjYyLCJleHAiOjE3NTA1MzM0NjJ9.8Rt0Jr1kNi6NZ1i9fRBV6WvhVYGeic_gzbL5XnC3YrQ'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 95,
  email: 'mdewmpod@domda.com',
  role: 'patient',
  iat: 1749928662,
  exp: 1750533462
}
üîê JWT: Usu√°rio mdewmpod@domda.com autenticado via cookie com plano ultra
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: mdewmpod@domda.com
üîç Buscando assinatura atual para usu√°rio mdewmpod@domda.com (ID: 95)
üîê JWT: Usu√°rio mdewmpod@domda.com autenticado via cookie com plano ultra
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: mdewmpod@domda.com
üîç Buscando assinatura atual para usu√°rio mdewmpod@domda.com (ID: 95)
‚ö†Ô∏è Nenhuma assinatura encontrada para mdewmpod@domda.com. Retornando null para for√ßar onboarding.
‚ö†Ô∏è Nenhuma assinatura encontrada para mdewmpod@domda.com. Retornando null para for√ßar onboarding.
üîê JWT: Usu√°rio mdewmpod@domda.com autenticado via cookie com plano ultra
üîê JWT: Usu√°rio mdewmpod@domda.com autenticado via cookie com plano ultra
Erro ao criar sess√£o de pagamento para assinatura: StripeInvalidRequestError: The payment method type "pix" is invalid. Please ensure the provided type is activated in your dashboard (https://dashboard.stripe.com/account/payments/settings) and your account is enabled for any preview features that you are trying to use.
    at StripeError.generate (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/stripe/cjs/Error.js:10:20)
    at res.toJSON.then.Error_js_1.StripeAPIError.message (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/stripe/cjs/RequestSender.js:105:54)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
  type: 'StripeInvalidRequestError',
  raw: {
    code: 'payment_intent_invalid_parameter',
    doc_url: 'https://stripe.com/docs/error-codes/payment-intent-invalid-parameter',
    message: 'The payment method type "pix" is invalid. Please ensure the provided type is activated in your dashboard (https://dashboard.stripe.com/account/payments/settings) and your account is enabled for any preview features that you are trying to use.',
    param: 'payment_method_types',
    request_log_url: 'https://dashboard.stripe.com/logs/req_yQFyjNDvaWvGeY?t=1749928773',
    type: 'invalid_request_error',
    headers: {
      server: 'nginx',
      date: 'Sat, 14 Jun 2025 19:19:33 GMT',
      'content-type': 'application/json',
      'content-length': '584',
      connection: 'keep-alive',
      'access-control-allow-credentials': 'true',
      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',
      'access-control-allow-origin': '*',
      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',
      'access-control-max-age': '300',
      'cache-control': 'no-cache, no-store',
      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=-xJkz7HyShtdp65keXknCmKcFSFS5z-Jq4cdjfA-Jms_E12u6kICy9mfZlwH52r4oZtTuWQ7sku6oitA",
      'idempotency-key': 'stripe-node-retry-c4a4af4f-4602-49e4-9f10-8f946e1cff75',
      'original-request': 'req_yQFyjNDvaWvGeY',
      'request-id': 'req_yQFyjNDvaWvGeY',
      'stripe-should-retry': 'false',
      'stripe-version': '2023-10-16',
      vary: 'Origin',
      'x-stripe-priority-routing-enabled': 'true',
      'x-stripe-routing-context-priority-tier': 'livemode-critical',
      'x-wc': 'ABGHI',
      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'
    },
    statusCode: 400,
    requestId: 'req_yQFyjNDvaWvGeY'
  },
  rawType: 'invalid_request_error',
  code: 'payment_intent_invalid_parameter',
  doc_url: 'https://stripe.com/docs/error-codes/payment-intent-invalid-parameter',
  param: 'payment_method_types',
  detail: undefined,
  headers: {
    server: 'nginx',
    date: 'Sat, 14 Jun 2025 19:19:33 GMT',
    'content-type': 'application/json',
    'content-length': '584',
    connection: 'keep-alive',
    'access-control-allow-credentials': 'true',
    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',
    'access-control-allow-origin': '*',
    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',
    'access-control-max-age': '300',
    'cache-control': 'no-cache, no-store',
    'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=-xJkz7HyShtdp65keXknCmKcFSFS5z-Jq4cdjfA-Jms_E12u6kICy9mfZlwH52r4oZtTuWQ7sku6oitA",
    'idempotency-key': 'stripe-node-retry-c4a4af4f-4602-49e4-9f10-8f946e1cff75',
    'original-request': 'req_yQFyjNDvaWvGeY',
    'request-id': 'req_yQFyjNDvaWvGeY',
    'stripe-should-retry': 'false',
    'stripe-version': '2023-10-16',
    vary: 'Origin',
    'x-stripe-priority-routing-enabled': 'true',
    'x-stripe-routing-context-priority-tier': 'livemode-critical',
    'x-wc': 'ABGHI',
    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'
  },
  requestId: 'req_yQFyjNDvaWvGeY',
  statusCode: 400,
  charge: undefined,
  decline_code: undefined,
  payment_intent: undefined,
  payment_method: undefined,
  payment_method_type: undefined,
  setup_intent: undefined,
  source: undefined
}
Erro ao criar sess√£o de pagamento para assinatura: StripeInvalidRequestError: The payment method type "pix" is invalid. Please ensure the provided type is activated in your dashboard (https://dashboard.stripe.com/account/payments/settings) and your account is enabled for any preview features that you are trying to use.
    at StripeError.generate (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/stripe/cjs/Error.js:10:20)
    at res.toJSON.then.Error_js_1.StripeAPIError.message (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/stripe/cjs/RequestSender.js:105:54)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
  type: 'StripeInvalidRequestError',
  raw: {
    code: 'payment_intent_invalid_parameter',
    doc_url: 'https://stripe.com/docs/error-codes/payment-intent-invalid-parameter',
    message: 'The payment method type "pix" is invalid. Please ensure the provided type is activated in your dashboard (https://dashboard.stripe.com/account/payments/settings) and your account is enabled for any preview features that you are trying to use.',
    param: 'payment_method_types',
    request_log_url: 'https://dashboard.stripe.com/logs/req_yQFyjNDvaWvGeY?t=1749928773',
    type: 'invalid_request_error',
    headers: {
      server: 'nginx',
      date: 'Sat, 14 Jun 2025 19:19:33 GMT',
      'content-type': 'application/json',
      'content-length': '584',
      connection: 'keep-alive',
      'access-control-allow-credentials': 'true',
      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',
      'access-control-allow-origin': '*',
      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',
      'access-control-max-age': '300',
      'cache-control': 'no-cache, no-store',
      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=-xJkz7HyShtdp65keXknCmKcFSFS5z-Jq4cdjfA-Jms_E12u6kICy9mfZlwH52r4oZtTuWQ7sku6oitA",
      'idempotency-key': 'stripe-node-retry-c4a4af4f-4602-49e4-9f10-8f946e1cff75',
      'original-request': 'req_yQFyjNDvaWvGeY',
      'request-id': 'req_yQFyjNDvaWvGeY',
      'stripe-should-retry': 'false',
      'stripe-version': '2023-10-16',
      vary: 'Origin',
      'x-stripe-priority-routing-enabled': 'true',
      'x-stripe-routing-context-priority-tier': 'livemode-critical',
      'x-wc': 'ABGHI',
      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'
    },
    statusCode: 400,
    requestId: 'req_yQFyjNDvaWvGeY'
  },
  rawType: 'invalid_request_error',
  code: 'payment_intent_invalid_parameter',
  doc_url: 'https://stripe.com/docs/error-codes/payment-intent-invalid-parameter',
  param: 'payment_method_types',
  detail: undefined,
  headers: {
    server: 'nginx',
    date: 'Sat, 14 Jun 2025 19:19:33 GMT',
    'content-type': 'application/json',
    'content-length': '584',
    connection: 'keep-alive',
    'access-control-allow-credentials': 'true',
    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',
    'access-control-allow-origin': '*',
    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',
    'access-control-max-age': '300',
    'cache-control': 'no-cache, no-store',
    'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=-xJkz7HyShtdp65keXknCmKcFSFS5z-Jq4cdjfA-Jms_E12u6kICy9mfZlwH52r4oZtTuWQ7sku6oitA",
    'idempotency-key': 'stripe-node-retry-c4a4af4f-4602-49e4-9f10-8f946e1cff75',
    'original-request': 'req_yQFyjNDvaWvGeY',
    'request-id': 'req_yQFyjNDvaWvGeY',
    'stripe-should-retry': 'false',
    'stripe-version': '2023-10-16',
    vary: 'Origin',
    'x-stripe-priority-routing-enabled': 'true',
    'x-stripe-routing-context-priority-tier': 'livemode-critical',
    'x-wc': 'ABGHI',
    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'
  },
  requestId: 'req_yQFyjNDvaWvGeY',
  statusCode: 400,
  charge: undefined,
  decline_code: undefined,
  payment_intent: undefined,
  payment_method: undefined,
  payment_method_type: undefined,
  setup_intent: undefined,
  source: undefined
}
üîê JWT: Usu√°rio mdewmpod@domda.com autenticado via cookie com plano ultra
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio mdewmpod@domda.com autenticado via cookie com plano ultra
Logout realizado com sucesso - cookies removidos
=== ROTA /api/user INTERCEPTADA ===
=== ROTA /api/user INTERCEPTADA ===
=== ROTA /api/login INTERCEPTADA ===
=== ROTA LOGIN CHAMADA ===
URL: /login
Method: POST
Body: { email: 'lucas.canova@icloud.com', password: 'qweasdzxc123' }
Buscando usu√°rio no banco: lucas.canova@icloud.com
Iniciando query no banco de dados...
Query executada, resultado: 1 usu√°rios encontrados
Usu√°rio encontrado: true
Verificando senha com scrypt
Login bem-sucedido para: lucas.canova@icloud.com
Cookie options: {
  host: 'localhost:8080',
  isLocalhost: true,
  isProduction: false,
  secure: false,
  domain: undefined
}
üîç Middleware JWT Global - Processando: /api/admin/users
üîç Cookies: {
  __stripe_mid: 'a798b73f-d9c8-4296-af41-2560b2bfa6a69e2291',
  __stripe_sid: 'd2b7b0cd-30e2-40d0-9183-830f31cc2364873ac0',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImVtYWlsIjoibHVjYXMuY2Fub3ZhQGljbG91ZC5jb20iLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NDk5Mjg4MDMsImV4cCI6MTc1MDUzMzYwM30.q4x0XUObGfnD5ExsYjp50V8lHGsjN6QFddkzeZGneBg'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîê JWT: Usu√°rio lucas.canova@icloud.com autenticado via cookie com plano premium
üîê requireAuth - Verificando autentica√ß√£o para GET /users
üîê requireAuth - req.user: 1 (admin)
‚úÖ requireAuth - Usu√°rio autenticado: 1 (admin)
üîê JWT: Usu√°rio lucas.canova@icloud.com autenticado via cookie com plano premium
=== ROTA /api/user INTERCEPTADA ===
üîç Middleware JWT Global - Processando: /api/admin/users
üîç Cookies: {
  __stripe_mid: 'a798b73f-d9c8-4296-af41-2560b2bfa6a69e2291',
  __stripe_sid: 'd2b7b0cd-30e2-40d0-9183-830f31cc2364873ac0',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImVtYWlsIjoibHVjYXMuY2Fub3ZhQGljbG91ZC5jb20iLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NDk5Mjg4MDMsImV4cCI6MTc1MDUzMzYwM30.q4x0XUObGfnD5ExsYjp50V8lHGsjN6QFddkzeZGneBg'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîê JWT: Usu√°rio lucas.canova@icloud.com autenticado via cookie com plano premium
üîê requireAuth - Verificando autentica√ß√£o para GET /users
üîê requireAuth - req.user: 1 (admin)
‚úÖ requireAuth - Usu√°rio autenticado: 1 (admin)
üîç Middleware JWT Global - Processando: /api/admin/users/95
üîç Cookies: {
  __stripe_mid: 'a798b73f-d9c8-4296-af41-2560b2bfa6a69e2291',
  __stripe_sid: 'd2b7b0cd-30e2-40d0-9183-830f31cc2364873ac0',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImVtYWlsIjoibHVjYXMuY2Fub3ZhQGljbG91ZC5jb20iLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NDk5Mjg4MDMsImV4cCI6MTc1MDUzMzYwM30.q4x0XUObGfnD5ExsYjp50V8lHGsjN6QFddkzeZGneBg'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîê JWT: Usu√°rio lucas.canova@icloud.com autenticado via cookie com plano premium
üîê requireAuth - Verificando autentica√ß√£o para DELETE /users/95
üîê requireAuth - req.user: 1 (admin)
‚úÖ requireAuth - Usu√°rio autenticado: 1 (admin)
üóëÔ∏è Tentando excluir usu√°rio ID: 95
‚úÖ Usu√°rio encontrado: Moreira Moreira Moreira (mdewmpod@domda.com)
‚úÖ Usu√°rio ID 95 exclu√≠do com sucesso
üîç Middleware JWT Global - Processando: /api/admin/users
üîç Cookies: {
  __stripe_mid: 'a798b73f-d9c8-4296-af41-2560b2bfa6a69e2291',
  __stripe_sid: 'd2b7b0cd-30e2-40d0-9183-830f31cc2364873ac0',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImVtYWlsIjoibHVjYXMuY2Fub3ZhQGljbG91ZC5jb20iLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NDk5Mjg4MDMsImV4cCI6MTc1MDUzMzYwM30.q4x0XUObGfnD5ExsYjp50V8lHGsjN6QFddkzeZGneBg'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîê JWT: Usu√°rio lucas.canova@icloud.com autenticado via cookie com plano premium
üîê requireAuth - Verificando autentica√ß√£o para GET /users
üîê requireAuth - req.user: 1 (admin)
‚úÖ requireAuth - Usu√°rio autenticado: 1 (admin)
üîç Middleware JWT Global - Processando: /api/admin/users/94
üîç Cookies: {
  __stripe_mid: 'a798b73f-d9c8-4296-af41-2560b2bfa6a69e2291',
  __stripe_sid: 'd2b7b0cd-30e2-40d0-9183-830f31cc2364873ac0',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImVtYWlsIjoibHVjYXMuY2Fub3ZhQGljbG91ZC5jb20iLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NDk5Mjg4MDMsImV4cCI6MTc1MDUzMzYwM30.q4x0XUObGfnD5ExsYjp50V8lHGsjN6QFddkzeZGneBg'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîê JWT: Usu√°rio lucas.canova@icloud.com autenticado via cookie com plano premium
üîê requireAuth - Verificando autentica√ß√£o para DELETE /users/94
üîê requireAuth - req.user: 1 (admin)
‚úÖ requireAuth - Usu√°rio autenticado: 1 (admin)
üóëÔ∏è Tentando excluir usu√°rio ID: 94
‚úÖ Usu√°rio encontrado: Moares Moreira Campos (dasndl@ddopqw.com)
‚úÖ Usu√°rio ID 94 exclu√≠do com sucesso
üîç Middleware JWT Global - Processando: /api/admin/users
üîç Cookies: {
  __stripe_mid: 'a798b73f-d9c8-4296-af41-2560b2bfa6a69e2291',
  __stripe_sid: 'd2b7b0cd-30e2-40d0-9183-830f31cc2364873ac0',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImVtYWlsIjoibHVjYXMuY2Fub3ZhQGljbG91ZC5jb20iLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NDk5Mjg4MDMsImV4cCI6MTc1MDUzMzYwM30.q4x0XUObGfnD5ExsYjp50V8lHGsjN6QFddkzeZGneBg'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîê JWT: Usu√°rio lucas.canova@icloud.com autenticado via cookie com plano premium
üîê requireAuth - Verificando autentica√ß√£o para GET /users
üîê requireAuth - req.user: 1 (admin)
‚úÖ requireAuth - Usu√°rio autenticado: 1 (admin)
üîç Middleware JWT Global - Processando: /api/admin/analytics/overview
üîç Cookies: {
  __stripe_mid: 'a798b73f-d9c8-4296-af41-2560b2bfa6a69e2291',
  __stripe_sid: 'd2b7b0cd-30e2-40d0-9183-830f31cc2364873ac0',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImVtYWlsIjoibHVjYXMuY2Fub3ZhQGljbG91ZC5jb20iLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NDk5Mjg4MDMsImV4cCI6MTc1MDUzMzYwM30.q4x0XUObGfnD5ExsYjp50V8lHGsjN6QFddkzeZGneBg'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Middleware JWT Global - Processando: /api/admin/analytics/growth?months=6
üîç Cookies: {
  __stripe_mid: 'a798b73f-d9c8-4296-af41-2560b2bfa6a69e2291',
  __stripe_sid: 'd2b7b0cd-30e2-40d0-9183-830f31cc2364873ac0',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImVtYWlsIjoibHVjYXMuY2Fub3ZhQGljbG91ZC5jb20iLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NDk5Mjg4MDMsImV4cCI6MTc1MDUzMzYwM30.q4x0XUObGfnD5ExsYjp50V8lHGsjN6QFddkzeZGneBg'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Middleware JWT Global - Processando: /api/admin/analytics/revenue?months=6
üîç Cookies: {
  __stripe_mid: 'a798b73f-d9c8-4296-af41-2560b2bfa6a69e2291',
  __stripe_sid: 'd2b7b0cd-30e2-40d0-9183-830f31cc2364873ac0',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImVtYWlsIjoibHVjYXMuY2Fub3ZhQGljbG91ZC5jb20iLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NDk5Mjg4MDMsImV4cCI6MTc1MDUzMzYwM30.q4x0XUObGfnD5ExsYjp50V8lHGsjN6QFddkzeZGneBg'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Middleware JWT Global - Processando: /api/admin/claims
üîç Cookies: {
  __stripe_mid: 'a798b73f-d9c8-4296-af41-2560b2bfa6a69e2291',
  __stripe_sid: 'd2b7b0cd-30e2-40d0-9183-830f31cc2364873ac0',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImVtYWlsIjoibHVjYXMuY2Fub3ZhQGljbG91ZC5jb20iLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NDk5Mjg4MDMsImV4cCI6MTc1MDUzMzYwM30.q4x0XUObGfnD5ExsYjp50V8lHGsjN6QFddkzeZGneBg'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîê JWT: Usu√°rio lucas.canova@icloud.com autenticado via cookie com plano premium
üîê requireAuth - Verificando autentica√ß√£o para GET /analytics/overview
üîê requireAuth - req.user: 1 (admin)
‚úÖ requireAuth - Usu√°rio autenticado: 1 (admin)
üîê JWT: Usu√°rio lucas.canova@icloud.com autenticado via cookie com plano premium
üîê requireAuth - Verificando autentica√ß√£o para GET /analytics/growth
üîê requireAuth - req.user: 1 (admin)
‚úÖ requireAuth - Usu√°rio autenticado: 1 (admin)
üîê JWT: Usu√°rio lucas.canova@icloud.com autenticado via cookie com plano premium
üîê requireAuth - Verificando autentica√ß√£o para GET /analytics/revenue
üîê requireAuth - req.user: 1 (admin)
‚úÖ requireAuth - Usu√°rio autenticado: 1 (admin)
üîê JWT: Usu√°rio lucas.canova@icloud.com autenticado via cookie com plano premium
üîê requireAuth - Verificando autentica√ß√£o para GET /claims
üîê requireAuth - req.user: 1 (admin)
‚úÖ requireAuth - Usu√°rio autenticado: 1 (admin)
üîç Middleware JWT Global - Processando: /api/admin/sellers
üîç Cookies: {
  __stripe_mid: 'a798b73f-d9c8-4296-af41-2560b2bfa6a69e2291',
  __stripe_sid: 'd2b7b0cd-30e2-40d0-9183-830f31cc2364873ac0',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImVtYWlsIjoibHVjYXMuY2Fub3ZhQGljbG91ZC5jb20iLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NDk5Mjg4MDMsImV4cCI6MTc1MDUzMzYwM30.q4x0XUObGfnD5ExsYjp50V8lHGsjN6QFddkzeZGneBg'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîê JWT: Usu√°rio lucas.canova@icloud.com autenticado via cookie com plano premium
üîê requireAuth - Verificando autentica√ß√£o para GET /sellers
üîê requireAuth - req.user: 1 (admin)
‚úÖ requireAuth - Usu√°rio autenticado: 1 (admin)
üîç Middleware JWT Global - Processando: /api/admin/qr-auth-logs
üîç Cookies: {
  __stripe_mid: 'a798b73f-d9c8-4296-af41-2560b2bfa6a69e2291',
  __stripe_sid: 'd2b7b0cd-30e2-40d0-9183-830f31cc2364873ac0',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImVtYWlsIjoibHVjYXMuY2Fub3ZhQGljbG91ZC5jb20iLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NDk5Mjg4MDMsImV4cCI6MTc1MDUzMzYwM30.q4x0XUObGfnD5ExsYjp50V8lHGsjN6QFddkzeZGneBg'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîê JWT: Usu√°rio lucas.canova@icloud.com autenticado via cookie com plano premium
üîê requireAuth - Verificando autentica√ß√£o para GET /qr-auth-logs
üîê requireAuth - req.user: 1 (admin)
‚úÖ requireAuth - Usu√°rio autenticado: 1 (admin)
üîç Middleware JWT Global - Processando: /api/admin/checkout-tracking?
üîç Cookies: {
  __stripe_mid: 'a798b73f-d9c8-4296-af41-2560b2bfa6a69e2291',
  __stripe_sid: 'd2b7b0cd-30e2-40d0-9183-830f31cc2364873ac0',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImVtYWlsIjoibHVjYXMuY2Fub3ZhQGljbG91ZC5jb20iLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NDk5Mjg4MDMsImV4cCI6MTc1MDUzMzYwM30.q4x0XUObGfnD5ExsYjp50V8lHGsjN6QFddkzeZGneBg'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Middleware JWT Global - Processando: /api/admin/checkout-tracking/metrics?
üîç Cookies: {
  __stripe_mid: 'a798b73f-d9c8-4296-af41-2560b2bfa6a69e2291',
  __stripe_sid: 'd2b7b0cd-30e2-40d0-9183-830f31cc2364873ac0',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImVtYWlsIjoibHVjYXMuY2Fub3ZhQGljbG91ZC5jb20iLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NDk5Mjg4MDMsImV4cCI6MTc1MDUzMzYwM30.q4x0XUObGfnD5ExsYjp50V8lHGsjN6QFddkzeZGneBg'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Middleware JWT Global - Processando: /api/admin/checkout-tracking/problem-users
üîç Cookies: {
  __stripe_mid: 'a798b73f-d9c8-4296-af41-2560b2bfa6a69e2291',
  __stripe_sid: 'd2b7b0cd-30e2-40d0-9183-830f31cc2364873ac0',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImVtYWlsIjoibHVjYXMuY2Fub3ZhQGljbG91ZC5jb20iLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NDk5Mjg4MDMsImV4cCI6MTc1MDUzMzYwM30.q4x0XUObGfnD5ExsYjp50V8lHGsjN6QFddkzeZGneBg'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîê JWT: Usu√°rio lucas.canova@icloud.com autenticado via cookie com plano premium
üîê requireAuth - Verificando autentica√ß√£o para GET /checkout-tracking
üîê requireAuth - req.user: 1 (admin)
‚úÖ requireAuth - Usu√°rio autenticado: 1 (admin)
üîê JWT: Usu√°rio lucas.canova@icloud.com autenticado via cookie com plano premium
üîê requireAuth - Verificando autentica√ß√£o para GET /checkout-tracking/metrics
üîê requireAuth - req.user: 1 (admin)
‚úÖ requireAuth - Usu√°rio autenticado: 1 (admin)
üîê JWT: Usu√°rio lucas.canova@icloud.com autenticado via cookie com plano premium
üîê requireAuth - Verificando autentica√ß√£o para GET /checkout-tracking/problem-users
üîê requireAuth - req.user: 1 (admin)
‚úÖ requireAuth - Usu√°rio autenticado: 1 (admin)
üîç Middleware JWT Global - Processando: /api/admin/claims
üîç Cookies: {
  __stripe_mid: 'a798b73f-d9c8-4296-af41-2560b2bfa6a69e2291',
  __stripe_sid: 'd2b7b0cd-30e2-40d0-9183-830f31cc2364873ac0',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImVtYWlsIjoibHVjYXMuY2Fub3ZhQGljbG91ZC5jb20iLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NDk5Mjg4MDMsImV4cCI6MTc1MDUzMzYwM30.q4x0XUObGfnD5ExsYjp50V8lHGsjN6QFddkzeZGneBg'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Middleware JWT Global - Processando: /api/admin/pending-claims
üîç Cookies: {
  __stripe_mid: 'a798b73f-d9c8-4296-af41-2560b2bfa6a69e2291',
  __stripe_sid: 'd2b7b0cd-30e2-40d0-9183-830f31cc2364873ac0',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImVtYWlsIjoibHVjYXMuY2Fub3ZhQGljbG91ZC5jb20iLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NDk5Mjg4MDMsImV4cCI6MTc1MDUzMzYwM30.q4x0XUObGfnD5ExsYjp50V8lHGsjN6QFddkzeZGneBg'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîê JWT: Usu√°rio lucas.canova@icloud.com autenticado via cookie com plano premium
üîê requireAuth - Verificando autentica√ß√£o para GET /claims
üîê requireAuth - req.user: 1 (admin)
‚úÖ requireAuth - Usu√°rio autenticado: 1 (admin)
üîê JWT: Usu√°rio lucas.canova@icloud.com autenticado via cookie com plano premium
üîê requireAuth - Verificando autentica√ß√£o para GET /pending-claims
üîê requireAuth - req.user: 1 (admin)
‚úÖ requireAuth - Usu√°rio autenticado: 1 (admin)
üîç Middleware JWT Global - Processando: /api/admin/services
üîç Cookies: {
  __stripe_mid: 'a798b73f-d9c8-4296-af41-2560b2bfa6a69e2291',
  __stripe_sid: 'd2b7b0cd-30e2-40d0-9183-830f31cc2364873ac0',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImVtYWlsIjoibHVjYXMuY2Fub3ZhQGljbG91ZC5jb20iLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NDk5Mjg4MDMsImV4cCI6MTc1MDUzMzYwM30.q4x0XUObGfnD5ExsYjp50V8lHGsjN6QFddkzeZGneBg'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Middleware JWT Global - Processando: /api/admin/partners
üîç Cookies: {
  __stripe_mid: 'a798b73f-d9c8-4296-af41-2560b2bfa6a69e2291',
  __stripe_sid: 'd2b7b0cd-30e2-40d0-9183-830f31cc2364873ac0',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImVtYWlsIjoibHVjYXMuY2Fub3ZhQGljbG91ZC5jb20iLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NDk5Mjg4MDMsImV4cCI6MTc1MDUzMzYwM30.q4x0XUObGfnD5ExsYjp50V8lHGsjN6QFddkzeZGneBg'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîê JWT: Usu√°rio lucas.canova@icloud.com autenticado via cookie com plano premium
üîê requireAuth - Verificando autentica√ß√£o para GET /services
üîê requireAuth - req.user: 1 (admin)
‚úÖ requireAuth - Usu√°rio autenticado: 1 (admin)
üîê JWT: Usu√°rio lucas.canova@icloud.com autenticado via cookie com plano premium
üîê requireAuth - Verificando autentica√ß√£o para GET /partners
üîê requireAuth - req.user: 1 (admin)
‚úÖ requireAuth - Usu√°rio autenticado: 1 (admin)
Error in admin partners route: error: column "profile_image" does not exist
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/@neondatabase/serverless/index.js:1086:33
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async NeonPreparedQuery.execute (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/neon-serverless/session.ts:61:18)
    at async <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/admin-routes.ts:206:22) {
  length: 114,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '222',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3716',
  routine: 'errorMissingColumn'
}
Error in admin services route: error: column "profile_image" does not exist
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/@neondatabase/serverless/index.js:1086:33
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async NeonPreparedQuery.execute (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/neon-serverless/session.ts:61:18)
    at async <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/admin-routes.ts:259:22) {
  length: 114,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '222',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3716',
  routine: 'errorMissingColumn'
}
üîê JWT: Usu√°rio lucas.canova@icloud.com autenticado via cookie com plano premium
Logout realizado com sucesso - cookies removidos
=== ROTA /api/user INTERCEPTADA ===
=== ROTA /api/user INTERCEPTADA ===
=== ROTA /api/login INTERCEPTADA ===
=== ROTA LOGIN CHAMADA ===
URL: /login
Method: POST
Body: { email: 'dr@lucascanova.com', password: 'qweasdzxc123' }
Buscando usu√°rio no banco: dr@lucascanova.com
Iniciando query no banco de dados...
Query executada, resultado: 1 usu√°rios encontrados
Usu√°rio encontrado: true
Verificando senha com bcrypt
Login bem-sucedido para: dr@lucascanova.com
Cookie options: {
  host: 'localhost:8080',
  isLocalhost: true,
  isProduction: false,
  secure: false,
  domain: undefined
}
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /profile
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /profile - Buscando perfil do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
‚úÖ Doctor /profile - Perfil encontrado: 4
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /profile
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /profile - Buscando perfil do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
‚úÖ Doctor /profile - Perfil encontrado: 4
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /user/32
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /user/:userId - Buscando m√©dico para user ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 32
‚úÖ Doctor /appointments - Consultas encontradas: 1
‚úÖ Doctor /user/:userId - M√©dico encontrado: 4
‚úÖ Notifications /unread-count - Contagem: 45
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /doctor/patients
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /availability
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /availability - Buscando disponibilidade do m√©dico ID: 32
‚úÖ Doctor /availability - Disponibilidade encontrada: 15
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
4:24:50 PM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 19:24:52.746267+00
Session table checked/created successfully
4:24:52 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /payments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /payments - Buscando pagamentos do m√©dico ID: 32
‚úÖ Doctor /payments - Pagamentos encontrados: 0
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
4:25:17 PM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 19:25:18.535622+00
Session table checked/created successfully
4:25:18 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
4:25:39 PM [tsx] change in ./server/routes/medical-records-routes.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 19:25:40.857696+00
Session table checked/created successfully
4:25:41 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
4:32:39 PM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 19:32:40.649231+00
Session table checked/created successfully
4:32:40 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
4:33:42 PM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 19:33:44.038164+00
Session table checked/created successfully
4:33:44 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 2
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 1
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 1
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /doctor/patients
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
[Medical Records] Buscando pacientes para m√©dico user ID: 32
Buscando pacientes para m√©dico undefined (Doctor ID: 4, User ID: 32)
Erro ao buscar pacientes do m√©dico: TypeError: Cannot convert undefined or null to object
    at Function.entries (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:16)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:88:19)
    at Array.reduce (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:32)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:955:23)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
    at PgSelectBase._prepare (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:954:17)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:977:16)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
4:34:38 PM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 19:34:40.262831+00
Session table checked/created successfully
4:34:40 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
4:34:57 PM [tsx] change in ./server/storage.ts Restarting...
cnode:internal/modules/run_main:129
    triggerUncaughtException(
    ^

Error: Transform failed with 1 error:
/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/storage.ts:1740:2: ERROR: Expected "finally" but found "async"
    at failureErrorWithLog (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/node_modules/esbuild/lib/main.js:1463:15)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/node_modules/esbuild/lib/main.js:734:50
    at responseCallbacks.<computed> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/node_modules/esbuild/lib/main.js:601:9)
    at handleIncomingPacket (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/node_modules/esbuild/lib/main.js:656:12)
    at Socket.readFromStdout (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/node_modules/esbuild/lib/main.js:579:7)
    at Socket.emit (node:events:519:28)
    at addChunk (node:internal/streams/readable:559:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)
    at Readable.push (node:internal/streams/readable:390:5)
    at Pipe.onStreamRead (node:internal/stream_base_commons:191:23) {
  name: 'TransformError'
}

Node.js v20.18.0
4:35:08 PM [tsx] change in ./server/storage.ts Rerunning...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 19:35:09.374714+00
Session table checked/created successfully
4:35:09 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
4:36:05 PM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 19:36:07.196262+00
Session table checked/created successfully
4:36:07 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /consultations/history
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /consultations/history - Buscando hist√≥rico do m√©dico ID: 32
‚úÖ Doctor /consultations/history - Encontradas 1 consultas
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /doctor/patients
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
[Medical Records] Buscando pacientes para m√©dico user ID: 32
Buscando pacientes para m√©dico undefined (Doctor ID: 4, User ID: 32)
Erro em getDoctorPatients: TypeError: Cannot convert undefined or null to object
    at Function.entries (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:16)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:88:19)
    at Array.reduce (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:32)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:955:23)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
    at PgSelectBase._prepare (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:954:17)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:977:16)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
Erro ao buscar pacientes do m√©dico: TypeError: Cannot convert undefined or null to object
    at Function.entries (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:16)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:88:19)
    at Array.reduce (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:32)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:955:23)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
    at PgSelectBase._prepare (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:954:17)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:977:16)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para DELETE /108
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
Delete consulta - Usu√°rio 32 (Lucas Dickel Canova, role: doctor) tentando excluir consulta
Usu√°rio 32 (Lucas Dickel Canova) excluindo consulta #108
Consulta encontrada: {
  id: 108,
  userId: 58,
  doctorId: 4,
  type: 'telemedicine',
  status: 'cancelled',
  isEmergency: false
}
Verificando permiss√£o de exclus√£o - M√©dico userId: 32, doctorId: 4, appointment.doctorId: 4
Permiss√£o de exclus√£o: true para usu√°rio 32 (doctor)
Consulta #108 exclu√≠da com sucesso
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA LOGIN CHAMADA ===
URL: /login
Method: POST
Body: { username: 'dr@lucascanova.com', password: '123' }
üîê requireAuth - Verificando autentica√ß√£o para GET /doctor/patients
üîê requireAuth - req.user: undefined
‚ùå requireAuth - Usu√°rio n√£o autenticado para GET /doctor/patients
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
4:39:28 PM [tsx] change in ./server/routes/medical-records-routes.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 19:39:30.033056+00
Session table checked/created successfully
4:39:30 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
4:43:00 PM [tsx] change in ./server/routes/medical-records-routes.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 19:43:02.72977+00
Session table checked/created successfully
4:43:02 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
4:43:55 PM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 19:43:56.680152+00
Session table checked/created successfully
4:43:56 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
4:44:14 PM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 19:44:15.939147+00
Session table checked/created successfully
4:44:16 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
4:44:26 PM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 19:44:27.395332+00
Session table checked/created successfully
4:44:27 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
[Medical Records Router] GET /doctor/patients
üîê requireAuth - Verificando autentica√ß√£o para GET /doctor/patients
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
[Medical Records] GET /doctor/patients chamado
[Medical Records] Buscando pacientes para m√©dico user ID: 32, role: doctor
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
Buscando pacientes para m√©dico Sem nome (Doctor ID: 4, User ID: 32)
Erro em getDoctorPatients: TypeError: Cannot convert undefined or null to object
    at Function.entries (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:16)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:88:19)
    at Array.reduce (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:32)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:955:23)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
    at PgSelectBase._prepare (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:954:17)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:977:16)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
[Medical Records] Erro ao buscar pacientes do m√©dico: TypeError: Cannot convert undefined or null to object
    at Function.entries (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:16)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:88:19)
    at Array.reduce (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:32)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:955:23)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
    at PgSelectBase._prepare (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:954:17)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:977:16)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
[Medical Records] Stack trace: TypeError: Cannot convert undefined or null to object
    at Function.entries (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:16)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:88:19)
    at Array.reduce (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:32)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:955:23)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
    at PgSelectBase._prepare (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:954:17)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:977:16)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
[Medical Records Router] GET /doctor/patients
üîê requireAuth - Verificando autentica√ß√£o para GET /doctor/patients
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
[Medical Records] GET /doctor/patients chamado
[Medical Records] Buscando pacientes para m√©dico user ID: 32, role: doctor
Buscando pacientes para m√©dico Sem nome (Doctor ID: 4, User ID: 32)
Erro em getDoctorPatients: TypeError: Cannot convert undefined or null to object
    at Function.entries (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:16)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:88:19)
    at Array.reduce (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:32)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:955:23)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
    at PgSelectBase._prepare (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:954:17)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:977:16)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
[Medical Records] Erro ao buscar pacientes do m√©dico: TypeError: Cannot convert undefined or null to object
    at Function.entries (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:16)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:88:19)
    at Array.reduce (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:32)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:955:23)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
    at PgSelectBase._prepare (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:954:17)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:977:16)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
[Medical Records] Stack trace: TypeError: Cannot convert undefined or null to object
    at Function.entries (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:16)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:88:19)
    at Array.reduce (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:32)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:955:23)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
    at PgSelectBase._prepare (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:954:17)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:977:16)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
Logout realizado com sucesso - cookies removidos
=== ROTA /api/user INTERCEPTADA ===
=== ROTA /api/user INTERCEPTADA ===
=== ROTA /api/login INTERCEPTADA ===
=== ROTA LOGIN CHAMADA ===
URL: /login
Method: POST
Body: { email: 'lucas.canova@hotmail.com', password: 'qweasdzxc123' }
Buscando usu√°rio no banco: lucas.canova@hotmail.com
Iniciando query no banco de dados...
Query executada, resultado: 1 usu√°rios encontrados
Usu√°rio encontrado: true
Verificando senha com bcrypt
=== ROTA /api/login INTERCEPTADA ===
=== ROTA LOGIN CHAMADA ===
URL: /login
Method: POST
Body: { email: 'lucas.canova@hotmail.com', password: '666666' }
Buscando usu√°rio no banco: lucas.canova@hotmail.com
Iniciando query no banco de dados...
Query executada, resultado: 1 usu√°rios encontrados
Usu√°rio encontrado: true
Verificando senha com bcrypt
Login bem-sucedido para: lucas.canova@hotmail.com
Cookie options: {
  host: 'localhost:8080',
  isLocalhost: true,
  isProduction: false,
  secure: false,
  domain: undefined
}
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTMwNjYwLCJleHAiOjE3NTA1MzU0NjB9.OM0_lVOgM4JuNAeqKuvE8UN6iOcNZc54B2XdyayeIq8'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 58,
  email: 'lucas.canova@hotmail.com',
  role: 'patient',
  iat: 1749930660,
  exp: 1750535460
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: lucas.canova@hotmail.com
üîç Buscando assinatura atual para usu√°rio lucas.canova@hotmail.com (ID: 58)
‚úÖ Notifications /unread-count - Contagem: 2
‚úÖ Assinatura encontrada:
   - ID: 1
   - Status: active
   - Plano: ultra_family
   - Data cria√ß√£o: Sun Jun 08 2025 20:10:30 GMT-0300 (Brasilia Standard Time)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTMwNjYwLCJleHAiOjE3NTA1MzU0NjB9.OM0_lVOgM4JuNAeqKuvE8UN6iOcNZc54B2XdyayeIq8'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 58,
  email: 'lucas.canova@hotmail.com',
  role: 'patient',
  iat: 1749930660,
  exp: 1750535460
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: lucas.canova@hotmail.com
üîç Buscando assinatura atual para usu√°rio lucas.canova@hotmail.com (ID: 58)
‚úÖ Notifications /unread-count - Contagem: 2
‚úÖ Assinatura encontrada:
   - ID: 1
   - Status: active
   - Plano: ultra_family
   - Data cria√ß√£o: Sun Jun 08 2025 20:10:30 GMT-0300 (Brasilia Standard Time)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /recent-activities
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Activities - Buscando atividades recentes do usu√°rio ID: 58
Total de consultas encontradas para usu√°rio 58: 0
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
Session table checked/created successfully
‚úÖ Activities - Atividades encontradas: 4
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
Total de consultas encontradas para usu√°rio 58: 0
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
‚ö†Ô∏è Arquivo de upload n√£o encontrado: /profile-1747951137232-694756185.jpg
üîÑ Redirecionando para imagem padr√£o: /profile-1747951137232-694756185.jpg
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-14
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-14
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-15
‚ÑπÔ∏è Doctor /:id/availability - Nenhum slot dispon√≠vel para o dia 6
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-16
‚ÑπÔ∏è Doctor /:id/availability - Nenhum slot dispon√≠vel para o dia 0
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-17
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-17
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-18
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-18
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-19
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-19
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-20
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-20
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-21
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-21
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-22
‚ÑπÔ∏è Doctor /:id/availability - Nenhum slot dispon√≠vel para o dia 6
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-23
‚ÑπÔ∏è Doctor /:id/availability - Nenhum slot dispon√≠vel para o dia 0
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-24
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-24
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-25
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-25
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-26
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-26
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-27
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-27
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
Erro ao criar inten√ß√£o de pagamento para consulta: AppError: Voc√™ precisa ter um m√©todo de pagamento cadastrado para realizar consultas
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-payment-routes.ts:53:13)
    at Layer.handle [as handle_request] (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/route.js:149:13)
    at requireAuth (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-payment-routes.ts:23:3)
    at Layer.handle [as handle_request] (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/layer.js:95:5)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/index.js:346:12) {
  statusCode: 400,
  status: 'fail',
  isOperational: true
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
Total de consultas encontradas para usu√°rio 58: 0
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
‚úÖ Notifications /unread-count - Contagem: 2
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
Total de consultas encontradas para usu√°rio 58: 0
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-14
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-14
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-15
‚ÑπÔ∏è Doctor /:id/availability - Nenhum slot dispon√≠vel para o dia 6
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-16
‚ÑπÔ∏è Doctor /:id/availability - Nenhum slot dispon√≠vel para o dia 0
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-17
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-17
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-18
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-18
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-19
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-19
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-20
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-20
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-21
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-21
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-22
‚ÑπÔ∏è Doctor /:id/availability - Nenhum slot dispon√≠vel para o dia 6
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-23
‚ÑπÔ∏è Doctor /:id/availability - Nenhum slot dispon√≠vel para o dia 0
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-24
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-24
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-25
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-25
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-26
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-26
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Doctor /:id/availability - Buscando disponibilidade do m√©dico ID: 4 para data: 2025-06-27
‚úÖ Doctor /:id/availability - 3 hor√°rios dispon√≠veis para 2025-06-27
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
Erro ao criar inten√ß√£o de pagamento para consulta: AppError: Voc√™ precisa ter um m√©todo de pagamento cadastrado para realizar consultas
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-payment-routes.ts:53:13)
    at Layer.handle [as handle_request] (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/route.js:149:13)
    at requireAuth (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-payment-routes.ts:23:3)
    at Layer.handle [as handle_request] (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/layer.js:95:5)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/express/lib/router/index.js:346:12) {
  statusCode: 400,
  status: 'fail',
  isOperational: true
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando claims para usu√°rio 58
Encontrados 0 claims
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
GET /api/dependents - Request received: {
  user: {
    id: 58,
    email: 'lucas.canova@hotmail.com',
    role: 'patient',
    fullName: 'Lucas Dickel Canova',
    username: 'p03474256076',
    emailVerified: true,
    subscriptionPlan: 'ultra_family',
    subscriptionStatus: 'active',
    emergencyConsultationsLeft: 8,
    emergencyConsultationsResetAt: undefined,
    profileImage: '/uploads/profiles/profile-1749872528273-906009943.jpg',
    phone: '',
    cpf: null,
    cnpj: undefined,
    city: 'Tr√™s Passos',
    state: 'RS',
    address: 'Gon√ßalves Dias, 333 - Pindorama - Tr√™s Passos/RS - CEP: 98600000',
    zipcode: '98600000'
  },
  url: '/',
  headers: {
    host: 'localhost:8080',
    connection: 'close',
    'cache-control': 'no-cache, no-store, must-revalidate',
    'sec-ch-ua-platform': '"macOS"',
    'x-user-id': '58',
    pragma: 'no-cache',
    'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
    'sec-ch-ua-mobile': '?0',
    expires: '0',
    'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
    accept: '*/*',
    'sec-fetch-site': 'same-origin',
    'sec-fetch-mode': 'cors',
    'sec-fetch-dest': 'empty',
    referer: 'http://localhost:5173/dependents',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'pt-BR,pt;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'auth_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTMwNjYwLCJleHAiOjE3NTA1MzU0NjB9.OM0_lVOgM4JuNAeqKuvE8UN6iOcNZc54B2XdyayeIq8; __stripe_mid=360319d9-5b52-42b2-a860-038dee78df1a383df8; __stripe_sid=4adf7105-fa67-4a01-9b70-5b88b9d6b399dd5a71'
  }
}
Buscando dependentes para usu√°rio ID: 58
Dependentes encontrados: 1
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /recent-activities
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Activities - Buscando atividades recentes do usu√°rio ID: 58
‚úÖ Activities - Atividades encontradas: 4
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTMwNjYwLCJleHAiOjE3NTA1MzU0NjB9.OM0_lVOgM4JuNAeqKuvE8UN6iOcNZc54B2XdyayeIq8',
  __stripe_mid: '360319d9-5b52-42b2-a860-038dee78df1a383df8',
  __stripe_sid: '4adf7105-fa67-4a01-9b70-5b88b9d6b399dd5a71'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 58,
  email: 'lucas.canova@hotmail.com',
  role: 'patient',
  iat: 1749930660,
  exp: 1750535460
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: lucas.canova@hotmail.com
üîç Buscando assinatura atual para usu√°rio lucas.canova@hotmail.com (ID: 58)
Retornando planos de assinatura para usu√°rio (rota p√∫blica): [
  {
    id: 4,
    name: 'free',
    displayName: 'Gratuito',
    price: 0,
    emergencyConsultations: '0',
    specialistDiscount: 0,
    insuranceCoverage: false,
    features: [
      'Acesso ao marketplace',
      'Pagamento integral pelos servi√ßos',
      '0 teleconsultas de emerg√™ncia por m√™s',
      'Sem descontos e sem cobertura de seguro'
    ],
    isDefault: true,
    createdAt: 2025-05-19T14:54:18.234Z,
    updatedAt: 2025-05-19T14:54:18.234Z
  },
  {
    id: 5,
    name: 'basic',
    displayName: 'B√°sico',
    price: 8990,
    emergencyConsultations: '2',
    specialistDiscount: 30,
    insuranceCoverage: true,
    features: [
      '2 teleconsultas de emerg√™ncia por m√™s',
      '30% de desconto com especialistas',
      'Acesso completo aos descontos de parceiros',
      'Cobertura de seguro: R$ 300/dia de interna√ß√£o',
      'Suporte 24/7'
    ],
    isDefault: false,
    createdAt: 2025-05-19T14:54:18.234Z,
    updatedAt: 2025-05-19T14:54:18.234Z
  },
  {
    id: 6,
    name: 'premium',
    displayName: 'Premium',
    price: 12990,
    emergencyConsultations: 'unlimited',
    specialistDiscount: 50,
    insuranceCoverage: true,
    features: [
      'Teleconsultas de emerg√™ncia ilimitadas',
      '50% de desconto com especialistas',
      'Prioridade de agendamento',
      'Cobertura de seguro: R$ 300/dia de interna√ß√£o',
      'Suporte priorit√°rio 24/7'
    ],
    isDefault: false,
    createdAt: 2025-05-19T14:54:18.234Z,
    updatedAt: 2025-05-19T14:54:18.234Z
  },
  {
    id: 7,
    name: 'basic_family',
    displayName: 'B√°sico Familiar',
    price: 14990,
    emergencyConsultations: '2',
    specialistDiscount: 30,
    insuranceCoverage: true,
    features: [
      'Mesmos benef√≠cios do B√°sico para cada dependente',
      'At√© 4 CPFs',
      '2 teleconsultas de emerg√™ncia por m√™s',
      '30% de desconto com especialistas',
      'Acesso completo aos descontos de parceiros',
      'Cobertura de seguro: R$ 300/dia de interna√ß√£o',
      'Suporte 24/7'
    ],
    isDefault: false,
    createdAt: 2025-05-20T02:56:59.709Z,
    updatedAt: 2025-05-20T02:56:59.709Z
  },
  {
    id: 8,
    name: 'premium_family',
    displayName: 'Premium Familiar',
    price: 19990,
    emergencyConsultations: 'unlimited',
    specialistDiscount: 50,
    insuranceCoverage: true,
    features: [
      'Mesmos benef√≠cios do Premium para cada dependente',
      'At√© 4 CPFs',
      'Teleconsultas de emerg√™ncia ilimitadas',
      '50% de desconto com especialistas',
      'Prioridade de agendamento',
      'Cobertura de seguro: R$ 300/dia de interna√ß√£o',
      'Suporte priorit√°rio 24/7'
    ],
    isDefault: false,
    createdAt: 2025-05-20T02:56:59.709Z,
    updatedAt: 2025-05-20T02:56:59.709Z
  },
  {
    id: 9,
    name: 'ultra',
    displayName: 'Ultra',
    price: 16990,
    emergencyConsultations: 'unlimited',
    specialistDiscount: 70,
    insuranceCoverage: true,
    features: [
      'Teleconsultas de emerg√™ncia ilimitadas',
      '70% de desconto com especialistas',
      'Prioridade m√°xima de agendamento',
      'Cobertura de seguro: R$ 500/dia de interna√ß√£o',
      'Todos os demais benef√≠cios dos planos anteriores'
    ],
    isDefault: false,
    createdAt: 2025-05-20T02:56:59.709Z,
    updatedAt: 2025-05-20T02:56:59.709Z
  },
  {
    id: 10,
    name: 'ultra_family',
    displayName: 'Ultra Familiar',
    price: 23990,
    emergencyConsultations: 'unlimited',
    specialistDiscount: 70,
    insuranceCoverage: true,
    features: [
      'Mesmos benef√≠cios do Ultra para cada dependente',
      'At√© 4 CPFs',
      'Teleconsultas de emerg√™ncia ilimitadas',
      '70% de desconto com especialistas',
      'Prioridade m√°xima de agendamento',
      'Cobertura de seguro: R$ 500/dia de interna√ß√£o',
      'Todos os demais benef√≠cios dos planos anteriores'
    ],
    isDefault: false,
    createdAt: 2025-05-20T02:56:59.709Z,
    updatedAt: 2025-05-20T02:56:59.709Z
  }
]
‚úÖ Assinatura encontrada:
   - ID: 1
   - Status: active
   - Plano: ultra_family
   - Data cria√ß√£o: Sun Jun 08 2025 20:10:30 GMT-0300 (Brasilia Standard Time)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /profile
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para PUT /profile
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üì• Dados recebidos no backend: {
  street: 'Gon√ßalves Dias',
  address: 'Gon√ßalves Dias, 333 - Pindorama - Tr√™s Passos/RS - CEP: 98600000',
  zipcode: '98600000',
  number: '333',
  neighborhood: 'Pindorama',
  city: 'Tr√™s Passos',
  state: 'RS'
}
üîÑ Atualizando perfil do usu√°rio 58 com campos: [
  'phone',        'birthDate',
  'address',      'city',
  'state',        'zipcode',
  'number',       'complement',
  'neighborhood', 'street'
]
üì¶ Valores sendo salvos: {
  phone: '51999862303',
  birthDate: '1994-03-23',
  address: 'Gon√ßalves Dias, 333 - Pindorama - Tr√™s Passos/RS - CEP: 98600000',
  city: 'Tr√™s Passos',
  state: 'RS',
  zipcode: '98600000',
  number: '333',
  complement: '',
  neighborhood: 'Pindorama',
  street: 'Gon√ßalves Dias'
}
‚úÖ Usu√°rio atualizado. Dados salvos: {
  street: 'Gon√ßalves Dias',
  address: 'Gon√ßalves Dias, 333 - Pindorama - Tr√™s Passos/RS - CEP: 98600000',
  zipcode: '98600000',
  city: 'Tr√™s Passos',
  state: 'RS'
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /profile
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /profile
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /settings
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
Total de consultas encontradas para usu√°rio 58: 0
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTMwNjYwLCJleHAiOjE3NTA1MzU0NjB9.OM0_lVOgM4JuNAeqKuvE8UN6iOcNZc54B2XdyayeIq8',
  __stripe_mid: '360319d9-5b52-42b2-a860-038dee78df1a383df8',
  __stripe_sid: '4adf7105-fa67-4a01-9b70-5b88b9d6b399dd5a71'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 58,
  email: 'lucas.canova@hotmail.com',
  role: 'patient',
  iat: 1749930660,
  exp: 1750535460
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: lucas.canova@hotmail.com
üîç Buscando assinatura atual para usu√°rio lucas.canova@hotmail.com (ID: 58)
‚úÖ Assinatura encontrada:
   - ID: 1
   - Status: active
   - Plano: ultra_family
   - Data cria√ß√£o: Sun Jun 08 2025 20:10:30 GMT-0300 (Brasilia Standard Time)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTMwNjYwLCJleHAiOjE3NTA1MzU0NjB9.OM0_lVOgM4JuNAeqKuvE8UN6iOcNZc54B2XdyayeIq8',
  __stripe_mid: '360319d9-5b52-42b2-a860-038dee78df1a383df8',
  __stripe_sid: '4adf7105-fa67-4a01-9b70-5b88b9d6b399dd5a71'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 58,
  email: 'lucas.canova@hotmail.com',
  role: 'patient',
  iat: 1749930660,
  exp: 1750535460
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: lucas.canova@hotmail.com
üîç Buscando assinatura atual para usu√°rio lucas.canova@hotmail.com (ID: 58)
Retornando planos de assinatura para usu√°rio (rota p√∫blica): [
  {
    id: 4,
    name: 'free',
    displayName: 'Gratuito',
    price: 0,
    emergencyConsultations: '0',
    specialistDiscount: 0,
    insuranceCoverage: false,
    features: [
      'Acesso ao marketplace',
      'Pagamento integral pelos servi√ßos',
      '0 teleconsultas de emerg√™ncia por m√™s',
      'Sem descontos e sem cobertura de seguro'
    ],
    isDefault: true,
    createdAt: 2025-05-19T14:54:18.234Z,
    updatedAt: 2025-05-19T14:54:18.234Z
  },
  {
    id: 5,
    name: 'basic',
    displayName: 'B√°sico',
    price: 8990,
    emergencyConsultations: '2',
    specialistDiscount: 30,
    insuranceCoverage: true,
    features: [
      '2 teleconsultas de emerg√™ncia por m√™s',
      '30% de desconto com especialistas',
      'Acesso completo aos descontos de parceiros',
      'Cobertura de seguro: R$ 300/dia de interna√ß√£o',
      'Suporte 24/7'
    ],
    isDefault: false,
    createdAt: 2025-05-19T14:54:18.234Z,
    updatedAt: 2025-05-19T14:54:18.234Z
  },
  {
    id: 6,
    name: 'premium',
    displayName: 'Premium',
    price: 12990,
    emergencyConsultations: 'unlimited',
    specialistDiscount: 50,
    insuranceCoverage: true,
    features: [
      'Teleconsultas de emerg√™ncia ilimitadas',
      '50% de desconto com especialistas',
      'Prioridade de agendamento',
      'Cobertura de seguro: R$ 300/dia de interna√ß√£o',
      'Suporte priorit√°rio 24/7'
    ],
    isDefault: false,
    createdAt: 2025-05-19T14:54:18.234Z,
    updatedAt: 2025-05-19T14:54:18.234Z
  },
  {
    id: 7,
    name: 'basic_family',
    displayName: 'B√°sico Familiar',
    price: 14990,
    emergencyConsultations: '2',
    specialistDiscount: 30,
    insuranceCoverage: true,
    features: [
      'Mesmos benef√≠cios do B√°sico para cada dependente',
      'At√© 4 CPFs',
      '2 teleconsultas de emerg√™ncia por m√™s',
      '30% de desconto com especialistas',
      'Acesso completo aos descontos de parceiros',
      'Cobertura de seguro: R$ 300/dia de interna√ß√£o',
      'Suporte 24/7'
    ],
    isDefault: false,
    createdAt: 2025-05-20T02:56:59.709Z,
    updatedAt: 2025-05-20T02:56:59.709Z
  },
  {
    id: 8,
    name: 'premium_family',
    displayName: 'Premium Familiar',
    price: 19990,
    emergencyConsultations: 'unlimited',
    specialistDiscount: 50,
    insuranceCoverage: true,
    features: [
      'Mesmos benef√≠cios do Premium para cada dependente',
      'At√© 4 CPFs',
      'Teleconsultas de emerg√™ncia ilimitadas',
      '50% de desconto com especialistas',
      'Prioridade de agendamento',
      'Cobertura de seguro: R$ 300/dia de interna√ß√£o',
      'Suporte priorit√°rio 24/7'
    ],
    isDefault: false,
    createdAt: 2025-05-20T02:56:59.709Z,
    updatedAt: 2025-05-20T02:56:59.709Z
  },
  {
    id: 9,
    name: 'ultra',
    displayName: 'Ultra',
    price: 16990,
    emergencyConsultations: 'unlimited',
    specialistDiscount: 70,
    insuranceCoverage: true,
    features: [
      'Teleconsultas de emerg√™ncia ilimitadas',
      '70% de desconto com especialistas',
      'Prioridade m√°xima de agendamento',
      'Cobertura de seguro: R$ 500/dia de interna√ß√£o',
      'Todos os demais benef√≠cios dos planos anteriores'
    ],
    isDefault: false,
    createdAt: 2025-05-20T02:56:59.709Z,
    updatedAt: 2025-05-20T02:56:59.709Z
  },
  {
    id: 10,
    name: 'ultra_family',
    displayName: 'Ultra Familiar',
    price: 23990,
    emergencyConsultations: 'unlimited',
    specialistDiscount: 70,
    insuranceCoverage: true,
    features: [
      'Mesmos benef√≠cios do Ultra para cada dependente',
      'At√© 4 CPFs',
      'Teleconsultas de emerg√™ncia ilimitadas',
      '70% de desconto com especialistas',
      'Prioridade m√°xima de agendamento',
      'Cobertura de seguro: R$ 500/dia de interna√ß√£o',
      'Todos os demais benef√≠cios dos planos anteriores'
    ],
    isDefault: false,
    createdAt: 2025-05-20T02:56:59.709Z,
    updatedAt: 2025-05-20T02:56:59.709Z
  }
]
‚úÖ Assinatura encontrada:
   - ID: 1
   - Status: active
   - Plano: ultra_family
   - Data cria√ß√£o: Sun Jun 08 2025 20:10:30 GMT-0300 (Brasilia Standard Time)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ATIVANDO PLANO GRATUITO ===
Headers recebidos: {
  host: 'localhost:8080',
  connection: 'close',
  'content-length': '2',
  'cache-control': 'no-cache, no-store, must-revalidate',
  'sec-ch-ua-platform': '"macOS"',
  'x-user-id': '58',
  pragma: 'no-cache',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  expires: '0',
  'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  'content-type': 'application/json',
  accept: '*/*',
  origin: 'http://localhost:5173',
  'sec-fetch-site': 'same-origin',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://localhost:5173/first-subscription',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'pt-BR,pt;q=0.9,en-US;q=0.8,en;q=0.7',
  cookie: 'auth_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTMwNjYwLCJleHAiOjE3NTA1MzU0NjB9.OM0_lVOgM4JuNAeqKuvE8UN6iOcNZc54B2XdyayeIq8; __stripe_mid=360319d9-5b52-42b2-a860-038dee78df1a383df8; __stripe_sid=4adf7105-fa67-4a01-9b70-5b88b9d6b399dd5a71'
}
Cookies dispon√≠veis: {
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTMwNjYwLCJleHAiOjE3NTA1MzU0NjB9.OM0_lVOgM4JuNAeqKuvE8UN6iOcNZc54B2XdyayeIq8',
  __stripe_mid: '360319d9-5b52-42b2-a860-038dee78df1a383df8',
  __stripe_sid: '4adf7105-fa67-4a01-9b70-5b88b9d6b399dd5a71'
}
Usu√°rio autenticado via cookie auth_token: 58 lucas.canova@hotmail.com
‚úÖ Ativando plano gratuito para usu√°rio lucas.canova@hotmail.com
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTMwNjYwLCJleHAiOjE3NTA1MzU0NjB9.OM0_lVOgM4JuNAeqKuvE8UN6iOcNZc54B2XdyayeIq8',
  __stripe_mid: '360319d9-5b52-42b2-a860-038dee78df1a383df8',
  __stripe_sid: '4adf7105-fa67-4a01-9b70-5b88b9d6b399dd5a71'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 58,
  email: 'lucas.canova@hotmail.com',
  role: 'patient',
  iat: 1749930660,
  exp: 1750535460
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: lucas.canova@hotmail.com
üîç Buscando assinatura atual para usu√°rio lucas.canova@hotmail.com (ID: 58)
‚úÖ Notifications /unread-count - Contagem: 2
‚úÖ Assinatura encontrada:
   - ID: 1
   - Status: active
   - Plano: ultra_family
   - Data cria√ß√£o: Sun Jun 08 2025 20:10:30 GMT-0300 (Brasilia Standard Time)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /recent-activities
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Activities - Buscando atividades recentes do usu√°rio ID: 58
Total de consultas encontradas para usu√°rio 58: 0
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
‚úÖ Activities - Atividades encontradas: 4
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTMwNjYwLCJleHAiOjE3NTA1MzU0NjB9.OM0_lVOgM4JuNAeqKuvE8UN6iOcNZc54B2XdyayeIq8',
  __stripe_mid: '360319d9-5b52-42b2-a860-038dee78df1a383df8',
  __stripe_sid: '4adf7105-fa67-4a01-9b70-5b88b9d6b399dd5a71'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 58,
  email: 'lucas.canova@hotmail.com',
  role: 'patient',
  iat: 1749930660,
  exp: 1750535460
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: lucas.canova@hotmail.com
üîç Buscando assinatura atual para usu√°rio lucas.canova@hotmail.com (ID: 58)
‚úÖ Assinatura encontrada:
   - ID: 1
   - Status: active
   - Plano: ultra_family
   - Data cria√ß√£o: Sun Jun 08 2025 20:10:30 GMT-0300 (Brasilia Standard Time)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /recent-activities
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Activities - Buscando atividades recentes do usu√°rio ID: 58
‚úÖ Activities - Atividades encontradas: 4
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
Total de consultas encontradas para usu√°rio 58: 0
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
5:06:21 PM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 20:06:22.710033+00
Session table checked/created successfully
5:06:22 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
5:06:38 PM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 20:06:39.890421+00
Session table checked/created successfully
5:06:40 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
Total de consultas encontradas para usu√°rio 58: 0
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
5:07:22 PM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 20:07:23.436889+00
Session table checked/created successfully
5:07:23 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
Logout realizado com sucesso - cookies removidos
=== ROTA /api/user INTERCEPTADA ===
=== ROTA /api/user INTERCEPTADA ===
=== ROTA /api/login INTERCEPTADA ===
=== ROTA LOGIN CHAMADA ===
URL: /login
Method: POST
Body: { email: 'dr@lucascanova.com', password: 'qweasdzxc123' }
Buscando usu√°rio no banco: dr@lucascanova.com
Iniciando query no banco de dados...
Query executada, resultado: 1 usu√°rios encontrados
Usu√°rio encontrado: true
Verificando senha com bcrypt
Login bem-sucedido para: dr@lucascanova.com
Cookie options: {
  host: 'localhost:8080',
  isLocalhost: true,
  isProduction: false,
  secure: false,
  domain: undefined
}
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /profile
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /profile - Buscando perfil do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
‚úÖ Doctor /profile - Perfil encontrado: 4
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /profile
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /profile - Buscando perfil do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
‚úÖ Doctor /profile - Perfil encontrado: 4
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /user/32
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /user/:userId - Buscando m√©dico para user ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
‚úÖ Doctor /user/:userId - M√©dico encontrado: 4
‚úÖ Notifications /unread-count - Contagem: 45
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
[Medical Records Router] GET /doctor/patients
üîê requireAuth - Verificando autentica√ß√£o para GET /doctor/patients
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
[Medical Records] GET /doctor/patients chamado
[Medical Records] Buscando pacientes para m√©dico user ID: 32, role: doctor
Buscando pacientes para m√©dico Lucas Dickel Canova (Doctor ID: 4, User ID: 32)
Erro em getDoctorPatients: TypeError: Cannot convert undefined or null to object
    at Function.entries (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:16)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:88:19)
    at Array.reduce (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:32)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:955:23)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
    at PgSelectBase._prepare (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:954:17)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:977:16)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
[Medical Records] Erro ao buscar pacientes do m√©dico: TypeError: Cannot convert undefined or null to object
    at Function.entries (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:16)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:88:19)
    at Array.reduce (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:32)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:955:23)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
    at PgSelectBase._prepare (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:954:17)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:977:16)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
[Medical Records] Stack trace: TypeError: Cannot convert undefined or null to object
    at Function.entries (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:16)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:88:19)
    at Array.reduce (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:32)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:955:23)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
    at PgSelectBase._prepare (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:954:17)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:977:16)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
5:09:10 PM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 20:09:11.749997+00
Session table checked/created successfully
5:09:11 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
5:09:21 PM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 20:09:22.894179+00
Session table checked/created successfully
5:09:23 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /consultations/history
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /consultations/history - Buscando hist√≥rico do m√©dico ID: 32
‚úÖ Doctor /consultations/history - Encontradas 0 consultas
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /payments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /payments - Buscando pagamentos do m√©dico ID: 32
‚úÖ Doctor /payments - Pagamentos encontrados: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /availability
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /availability - Buscando disponibilidade do m√©dico ID: 32
‚úÖ Doctor /availability - Disponibilidade encontrada: 15
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
[Medical Records Router] GET /doctor/patients
üîê requireAuth - Verificando autentica√ß√£o para GET /doctor/patients
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
[Medical Records] GET /doctor/patients chamado
[Medical Records] Buscando pacientes para m√©dico user ID: 32, role: doctor
Buscando pacientes para m√©dico Doctor ID: 4, User ID: 32
Erro em getDoctorPatients: TypeError: Cannot convert undefined or null to object
    at Function.entries (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:16)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:88:19)
    at Array.reduce (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:32)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:955:23)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
    at PgSelectBase._prepare (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:954:17)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:977:16)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
[Medical Records] Erro ao buscar pacientes do m√©dico: TypeError: Cannot convert undefined or null to object
    at Function.entries (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:16)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:88:19)
    at Array.reduce (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:32)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:955:23)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
    at PgSelectBase._prepare (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:954:17)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:977:16)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
[Medical Records] Stack trace: TypeError: Cannot convert undefined or null to object
    at Function.entries (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:16)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:88:19)
    at Array.reduce (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:32)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:955:23)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
    at PgSelectBase._prepare (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:954:17)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:977:16)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /user/32
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /user/:userId - Buscando m√©dico para user ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
[Medical Records Router] GET /doctor/patients
üîê requireAuth - Verificando autentica√ß√£o para GET /doctor/patients
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
[Medical Records] GET /doctor/patients chamado
[Medical Records] Buscando pacientes para m√©dico user ID: 32, role: doctor
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 32
‚úÖ Doctor /user/:userId - M√©dico encontrado: 4
Buscando pacientes para m√©dico Doctor ID: 4, User ID: 32
Erro em getDoctorPatients: TypeError: Cannot convert undefined or null to object
    at Function.entries (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:16)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:88:19)
    at Array.reduce (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:32)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:955:23)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
    at PgSelectBase._prepare (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:954:17)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:977:16)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
[Medical Records] Erro ao buscar pacientes do m√©dico: TypeError: Cannot convert undefined or null to object
    at Function.entries (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:16)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:88:19)
    at Array.reduce (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:32)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:955:23)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
    at PgSelectBase._prepare (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:954:17)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:977:16)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
[Medical Records] Stack trace: TypeError: Cannot convert undefined or null to object
    at Function.entries (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:16)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:88:19)
    at Array.reduce (<anonymous>)
    at orderSelectedFields (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/utils.ts:77:32)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:955:23)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
    at PgSelectBase._prepare (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:954:17)
    at <anonymous> (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/pg-core/query-builders/select.ts:977:16)
    at Object.startActiveSpan (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/src/tracing.ts:27:11)
‚úÖ Notifications /unread-count - Contagem: 45
5:11:25 PM [tsx] change in ./server/storage.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 20:11:27.113811+00
Session table checked/created successfully
5:11:27 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /user/32
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /user/:userId - Buscando m√©dico para user ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
[Medical Records Router] GET /doctor/patients
üîê requireAuth - Verificando autentica√ß√£o para GET /doctor/patients
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
[Medical Records] GET /doctor/patients chamado
[Medical Records] Buscando pacientes para m√©dico user ID: 32, role: doctor
‚úÖ Doctor /user/:userId - M√©dico encontrado: 4
‚úÖ Notifications /unread-count - Contagem: 45
Buscando pacientes para m√©dico Doctor ID: 4, User ID: 32
Encontradas 0 consultas v√°lidas
Encontrados 0 pacientes com consultas n√£o canceladas
[Medical Records] Encontrados 0 pacientes
[Medical Records] Pacientes: []
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /profile
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /profile - Buscando perfil do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
‚úÖ Doctor /profile - Perfil encontrado: 4
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /availability
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /availability - Buscando disponibilidade do m√©dico ID: 32
‚úÖ Doctor /availability - Disponibilidade encontrada: 15
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /payments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /payments - Buscando pagamentos do m√©dico ID: 32
‚úÖ Doctor /payments - Pagamentos encontrados: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /consultations/history
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /consultations/history - Buscando hist√≥rico do m√©dico ID: 32
‚úÖ Doctor /consultations/history - Encontradas 0 consultas
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
[Medical Records Router] GET /doctor/patients
üîê requireAuth - Verificando autentica√ß√£o para GET /doctor/patients
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
[Medical Records] GET /doctor/patients chamado
[Medical Records] Buscando pacientes para m√©dico user ID: 32, role: doctor
Buscando pacientes para m√©dico Doctor ID: 4, User ID: 32
Encontradas 0 consultas v√°lidas
Encontrados 0 pacientes com consultas n√£o canceladas
[Medical Records] Encontrados 0 pacientes
[Medical Records] Pacientes: []
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê requireAuth - Verificando autentica√ß√£o para GET /appointments
üîê requireAuth - req.user: 32 (doctor)
‚úÖ requireAuth - Usu√°rio autenticado: 32 (doctor)
üîç Doctor /appointments - Buscando consultas do m√©dico ID: 32
üîç Doctor /appointments - Total de consultas: 1
üîç Doctor /appointments - Consultas do m√©dico (ID 4): 0
üîç Doctor /appointments - Consultas de emerg√™ncia: 0
üîç Doctor /appointments - Consultas com status waiting: 0
‚úÖ Doctor /appointments - Consultas encontradas: 0
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
üîê JWT: Usu√°rio dr@lucascanova.com autenticado via cookie com plano free
Logout realizado com sucesso - cookies removidos
=== ROTA /api/user INTERCEPTADA ===
=== ROTA /api/user INTERCEPTADA ===
=== ROTA /api/login INTERCEPTADA ===
=== ROTA LOGIN CHAMADA ===
URL: /login
Method: POST
Body: { email: 'lucas.canova@hotmail.com', password: '666666' }
Buscando usu√°rio no banco: lucas.canova@hotmail.com
Iniciando query no banco de dados...
Query executada, resultado: 1 usu√°rios encontrados
Usu√°rio encontrado: true
Verificando senha com bcrypt
Login bem-sucedido para: lucas.canova@hotmail.com
Cookie options: {
  host: 'localhost:8080',
  isLocalhost: true,
  isProduction: false,
  secure: false,
  domain: undefined
}
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  __stripe_mid: '24ca1cc5-2aab-4f55-8d40-f0e05d93937f5035c1',
  __stripe_sid: 'ef4e828d-e602-4ee5-ba4e-0514af2f1511429015',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTMyNzg0LCJleHAiOjE3NTA1Mzc1ODR9.gg84LWcogC4d3QLLps9FIXHJHgQDeh4s_RS8IvVOVCY'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 58,
  email: 'lucas.canova@hotmail.com',
  role: 'patient',
  iat: 1749932784,
  exp: 1750537584
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: lucas.canova@hotmail.com
üîç Buscando assinatura atual para usu√°rio lucas.canova@hotmail.com (ID: 58)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
‚ö†Ô∏è Arquivo de upload n√£o encontrado: /profiles/profile-1749872528273-906009943.jpg
üîÑ Redirecionando para imagem padr√£o: /profiles/profile-1749872528273-906009943.jpg
‚úÖ Notifications /unread-count - Contagem: 2
‚úÖ Assinatura encontrada:
   - ID: 1
   - Status: active
   - Plano: ultra_family
   - Data cria√ß√£o: Sun Jun 08 2025 20:10:30 GMT-0300 (Brasilia Standard Time)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  __stripe_mid: '24ca1cc5-2aab-4f55-8d40-f0e05d93937f5035c1',
  __stripe_sid: 'ef4e828d-e602-4ee5-ba4e-0514af2f1511429015',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTMyNzg0LCJleHAiOjE3NTA1Mzc1ODR9.gg84LWcogC4d3QLLps9FIXHJHgQDeh4s_RS8IvVOVCY'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 58,
  email: 'lucas.canova@hotmail.com',
  role: 'patient',
  iat: 1749932784,
  exp: 1750537584
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: lucas.canova@hotmail.com
üîç Buscando assinatura atual para usu√°rio lucas.canova@hotmail.com (ID: 58)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
‚ö†Ô∏è Arquivo de upload n√£o encontrado: /profiles/profile-1749872528273-906009943.jpg
üîÑ Redirecionando para imagem padr√£o: /profiles/profile-1749872528273-906009943.jpg
‚úÖ Notifications /unread-count - Contagem: 2
‚úÖ Assinatura encontrada:
   - ID: 1
   - Status: active
   - Plano: ultra_family
   - Data cria√ß√£o: Sun Jun 08 2025 20:10:30 GMT-0300 (Brasilia Standard Time)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /recent-activities
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Activities - Buscando atividades recentes do usu√°rio ID: 58
Total de consultas encontradas para usu√°rio 58: 0
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
‚úÖ Activities - Atividades encontradas: 4
Session table checked/created successfully
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
5:32:05 PM [tsx] change in ./server/routes/auth-routes.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 20:32:07.783167+00
Session table checked/created successfully
5:32:07 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  __stripe_mid: '24ca1cc5-2aab-4f55-8d40-f0e05d93937f5035c1',
  __stripe_sid: 'ef4e828d-e602-4ee5-ba4e-0514af2f1511429015',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTMyNzg0LCJleHAiOjE3NTA1Mzc1ODR9.gg84LWcogC4d3QLLps9FIXHJHgQDeh4s_RS8IvVOVCY'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 58,
  email: 'lucas.canova@hotmail.com',
  role: 'patient',
  iat: 1749932784,
  exp: 1750537584
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: lucas.canova@hotmail.com
üîç Buscando assinatura atual para usu√°rio lucas.canova@hotmail.com (ID: 58)
‚úÖ Notifications /unread-count - Contagem: 2
‚úÖ Assinatura encontrada:
   - ID: 1
   - Status: active
   - Plano: ultra_family
   - Data cria√ß√£o: Sun Jun 08 2025 20:10:30 GMT-0300 (Brasilia Standard Time)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /recent-activities
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Activities - Buscando atividades recentes do usu√°rio ID: 58
Total de consultas encontradas para usu√°rio 58: 0
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
Session table checked/created successfully
‚úÖ Activities - Atividades encontradas: 4
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
5:57:09 PM [tsx] change in ./server/routes/index.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 20:57:11.713846+00
Session table checked/created successfully
5:57:11 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
5:57:17 PM [tsx] change in ./server/routes/index.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
node:internal/modules/cjs/loader:1225
  const err = new Error(message);
              ^

Error: Cannot find module '../middleware/auth-middleware'
Require stack:
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-recording-routes.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts
    at Module._resolveFilename (node:internal/modules/cjs/loader:1225:15)
    at nextResolveSimple (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:942)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:2550
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:1624
    at resolveTsPaths (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:760)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:1038
    at m._resolveFilename (file:///Users/lucascanova/Documents/CNVidas%201.0/CNVidas-updated/node_modules/tsx/dist/register-hc1YoAqe.mjs:1:789)
    at Module._load (node:internal/modules/cjs/loader:1051:27)
    at Module.require (node:internal/modules/cjs/loader:1311:19)
    at require (node:internal/modules/helpers:179:18) {
  code: 'MODULE_NOT_FOUND',
  requireStack: [
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-recording-routes.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts'
  ]
}

Node.js v20.18.0
6:02:20 PM [tsx] change in ./server/routes/index.ts Rerunning...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
node:internal/modules/cjs/loader:1225
  const err = new Error(message);
              ^

Error: Cannot find module '../middleware/auth-middleware'
Require stack:
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-recording-routes.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts
    at Module._resolveFilename (node:internal/modules/cjs/loader:1225:15)
    at nextResolveSimple (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:942)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:2550
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:1624
    at resolveTsPaths (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:760)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:1038
    at m._resolveFilename (file:///Users/lucascanova/Documents/CNVidas%201.0/CNVidas-updated/node_modules/tsx/dist/register-hc1YoAqe.mjs:1:789)
    at Module._load (node:internal/modules/cjs/loader:1051:27)
    at Module.require (node:internal/modules/cjs/loader:1311:19)
    at require (node:internal/modules/helpers:179:18) {
  code: 'MODULE_NOT_FOUND',
  requireStack: [
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-recording-routes.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts'
  ]
}

Node.js v20.18.0
6:02:30 PM [tsx] change in ./server/routes/index.ts Rerunning...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
node:internal/modules/cjs/loader:1225
  const err = new Error(message);
              ^

Error: Cannot find module '../middleware/auth-middleware'
Require stack:
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/medical-records-ai-routes.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts
    at Module._resolveFilename (node:internal/modules/cjs/loader:1225:15)
    at nextResolveSimple (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:942)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:2550
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:1624
    at resolveTsPaths (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:760)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:1038
    at m._resolveFilename (file:///Users/lucascanova/Documents/CNVidas%201.0/CNVidas-updated/node_modules/tsx/dist/register-hc1YoAqe.mjs:1:789)
    at Module._load (node:internal/modules/cjs/loader:1051:27)
    at Module.require (node:internal/modules/cjs/loader:1311:19)
    at require (node:internal/modules/helpers:179:18) {
  code: 'MODULE_NOT_FOUND',
  requireStack: [
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/medical-records-ai-routes.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts'
  ]
}

Node.js v20.18.0
6:07:23 PM [tsx] change in ./server/routes/index.ts Rerunning...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
node:internal/modules/cjs/loader:1225
  const err = new Error(message);
              ^

Error: Cannot find module '../middleware/auth-middleware'
Require stack:
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/medical-records-ai-routes.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts
    at Module._resolveFilename (node:internal/modules/cjs/loader:1225:15)
    at nextResolveSimple (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:942)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:2550
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:1624
    at resolveTsPaths (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:760)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:1038
    at m._resolveFilename (file:///Users/lucascanova/Documents/CNVidas%201.0/CNVidas-updated/node_modules/tsx/dist/register-hc1YoAqe.mjs:1:789)
    at Module._load (node:internal/modules/cjs/loader:1051:27)
    at Module.require (node:internal/modules/cjs/loader:1311:19)
    at require (node:internal/modules/helpers:179:18) {
  code: 'MODULE_NOT_FOUND',
  requireStack: [
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/medical-records-ai-routes.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts'
  ]
}

Node.js v20.18.0
6:07:31 PM [tsx] change in ./server/routes/index.ts Rerunning...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
node:internal/modules/cjs/loader:1225
  const err = new Error(message);
              ^

Error: Cannot find module '../middleware/auth-middleware'
Require stack:
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/medical-records-ai-routes.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts
    at Module._resolveFilename (node:internal/modules/cjs/loader:1225:15)
    at nextResolveSimple (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:942)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:2550
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:1624
    at resolveTsPaths (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:760)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:1038
    at m._resolveFilename (file:///Users/lucascanova/Documents/CNVidas%201.0/CNVidas-updated/node_modules/tsx/dist/register-hc1YoAqe.mjs:1:789)
    at Module._load (node:internal/modules/cjs/loader:1051:27)
    at Module.require (node:internal/modules/cjs/loader:1311:19)
    at require (node:internal/modules/helpers:179:18) {
  code: 'MODULE_NOT_FOUND',
  requireStack: [
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/medical-records-ai-routes.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts'
  ]
}

Node.js v20.18.0
6:08:54 PM [tsx] change in ./server/routes/medical-records-ai-routes.ts Rerunning...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
node:internal/modules/cjs/loader:1225
  const err = new Error(message);
              ^

Error: Cannot find module '../middleware/auth-middleware'
Require stack:
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-recording-routes.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts
    at Module._resolveFilename (node:internal/modules/cjs/loader:1225:15)
    at nextResolveSimple (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:942)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:2550
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:1624
    at resolveTsPaths (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:760)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:1038
    at m._resolveFilename (file:///Users/lucascanova/Documents/CNVidas%201.0/CNVidas-updated/node_modules/tsx/dist/register-hc1YoAqe.mjs:1:789)
    at Module._load (node:internal/modules/cjs/loader:1051:27)
    at Module.require (node:internal/modules/cjs/loader:1311:19)
    at require (node:internal/modules/helpers:179:18) {
  code: 'MODULE_NOT_FOUND',
  requireStack: [
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-recording-routes.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts'
  ]
}

Node.js v20.18.0
6:14:05 PM [tsx] change in ./server/routes/index.ts Rerunning...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
node:internal/modules/cjs/loader:1225
  const err = new Error(message);
              ^

Error: Cannot find module '../middleware/auth-middleware'
Require stack:
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-recording-routes.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts
    at Module._resolveFilename (node:internal/modules/cjs/loader:1225:15)
    at nextResolveSimple (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:942)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:2550
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:1624
    at resolveTsPaths (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:760)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:1038
    at m._resolveFilename (file:///Users/lucascanova/Documents/CNVidas%201.0/CNVidas-updated/node_modules/tsx/dist/register-hc1YoAqe.mjs:1:789)
    at Module._load (node:internal/modules/cjs/loader:1051:27)
    at Module.require (node:internal/modules/cjs/loader:1311:19)
    at require (node:internal/modules/helpers:179:18) {
  code: 'MODULE_NOT_FOUND',
  requireStack: [
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-recording-routes.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts'
  ]
}

Node.js v20.18.0
6:14:30 PM [tsx] change in ./server/routes/index.ts Rerunning...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
node:internal/modules/cjs/loader:1225
  const err = new Error(message);
              ^

Error: Cannot find module '../middleware/auth-middleware'
Require stack:
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-recording-routes.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts
    at Module._resolveFilename (node:internal/modules/cjs/loader:1225:15)
    at nextResolveSimple (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:942)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:2550
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:1624
    at resolveTsPaths (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:760)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:1038
    at m._resolveFilename (file:///Users/lucascanova/Documents/CNVidas%201.0/CNVidas-updated/node_modules/tsx/dist/register-hc1YoAqe.mjs:1:789)
    at Module._load (node:internal/modules/cjs/loader:1051:27)
    at Module.require (node:internal/modules/cjs/loader:1311:19)
    at require (node:internal/modules/helpers:179:18) {
  code: 'MODULE_NOT_FOUND',
  requireStack: [
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-recording-routes.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts'
  ]
}

Node.js v20.18.0
6:33:07 PM [tsx] change in ./server/routes/auth-routes.ts Rerunning...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
node:internal/modules/cjs/loader:1225
  const err = new Error(message);
              ^

Error: Cannot find module '../middleware/auth-middleware'
Require stack:
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-recording-routes.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts
    at Module._resolveFilename (node:internal/modules/cjs/loader:1225:15)
    at nextResolveSimple (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:942)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:2550
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:1624
    at resolveTsPaths (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:760)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:1038
    at m._resolveFilename (file:///Users/lucascanova/Documents/CNVidas%201.0/CNVidas-updated/node_modules/tsx/dist/register-hc1YoAqe.mjs:1:789)
    at Module._load (node:internal/modules/cjs/loader:1051:27)
    at Module.require (node:internal/modules/cjs/loader:1311:19)
    at require (node:internal/modules/helpers:179:18) {
  code: 'MODULE_NOT_FOUND',
  requireStack: [
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-recording-routes.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts'
  ]
}

Node.js v20.18.0
6:33:23 PM [tsx] change in ./server/routes/auth-routes.ts Rerunning...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
node:internal/modules/cjs/loader:1225
  const err = new Error(message);
              ^

Error: Cannot find module '../middleware/auth-middleware'
Require stack:
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-recording-routes.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts
    at Module._resolveFilename (node:internal/modules/cjs/loader:1225:15)
    at nextResolveSimple (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:942)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:2550
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:1624
    at resolveTsPaths (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:760)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:1038
    at m._resolveFilename (file:///Users/lucascanova/Documents/CNVidas%201.0/CNVidas-updated/node_modules/tsx/dist/register-hc1YoAqe.mjs:1:789)
    at Module._load (node:internal/modules/cjs/loader:1051:27)
    at Module.require (node:internal/modules/cjs/loader:1311:19)
    at require (node:internal/modules/helpers:179:18) {
  code: 'MODULE_NOT_FOUND',
  requireStack: [
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-recording-routes.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts'
  ]
}

Node.js v20.18.0
6:34:32 PM [tsx] change in ./server/storage.ts Rerunning...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
node:internal/modules/cjs/loader:1225
  const err = new Error(message);
              ^

Error: Cannot find module '../middleware/auth-middleware'
Require stack:
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-recording-routes.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts
    at Module._resolveFilename (node:internal/modules/cjs/loader:1225:15)
    at nextResolveSimple (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:942)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:2550
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:1624
    at resolveTsPaths (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:760)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:1038
    at m._resolveFilename (file:///Users/lucascanova/Documents/CNVidas%201.0/CNVidas-updated/node_modules/tsx/dist/register-hc1YoAqe.mjs:1:789)
    at Module._load (node:internal/modules/cjs/loader:1051:27)
    at Module.require (node:internal/modules/cjs/loader:1311:19)
    at require (node:internal/modules/helpers:179:18) {
  code: 'MODULE_NOT_FOUND',
  requireStack: [
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-recording-routes.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts'
  ]
}

Node.js v20.18.0
6:34:52 PM [tsx] change in ./server/routes/auth-routes.ts Rerunning...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
node:internal/modules/cjs/loader:1225
  const err = new Error(message);
              ^

Error: Cannot find module '../middleware/auth-middleware'
Require stack:
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-recording-routes.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts
    at Module._resolveFilename (node:internal/modules/cjs/loader:1225:15)
    at nextResolveSimple (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:942)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:2550
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:1624
    at resolveTsPaths (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:760)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:1038
    at m._resolveFilename (file:///Users/lucascanova/Documents/CNVidas%201.0/CNVidas-updated/node_modules/tsx/dist/register-hc1YoAqe.mjs:1:789)
    at Module._load (node:internal/modules/cjs/loader:1051:27)
    at Module.require (node:internal/modules/cjs/loader:1311:19)
    at require (node:internal/modules/helpers:179:18) {
  code: 'MODULE_NOT_FOUND',
  requireStack: [
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-recording-routes.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts'
  ]
}

Node.js v20.18.0
6:47:09 PM [tsx] change in ./server/routes/consultation-recording-routes.ts Rerunning...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
node:internal/modules/cjs/loader:1225
  const err = new Error(message);
              ^

Error: Cannot find module 'aws-sdk'
Require stack:
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/utils/s3-upload.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-recording-routes.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts
- /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts
    at Module._resolveFilename (node:internal/modules/cjs/loader:1225:15)
    at nextResolveSimple (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:942)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:2550
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:2:1624
    at resolveTsPaths (/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:760)
    at /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/node_modules/tsx/dist/register-D2KMMyKp.cjs:3:1038
    at m._resolveFilename (file:///Users/lucascanova/Documents/CNVidas%201.0/CNVidas-updated/node_modules/tsx/dist/register-hc1YoAqe.mjs:1:789)
    at Module._load (node:internal/modules/cjs/loader:1051:27)
    at Module.require (node:internal/modules/cjs/loader:1311:19)
    at require (node:internal/modules/helpers:179:18) {
  code: 'MODULE_NOT_FOUND',
  requireStack: [
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/utils/s3-upload.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/consultation-recording-routes.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/routes/index.ts',
    '/Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/server/index.ts'
  ]
}

Node.js v20.18.0
6:47:40 PM [tsx] change in ./server/utils/s3-upload.ts Rerunning...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
AWS SDK n√£o dispon√≠vel, S3 upload desabilitado
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando settingsRouter em /api/users/settings
Registrando userSettingsRouter em /api
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Registrando medicalRecordsAIRouter em /api/medical-records-ai
Registrando consultationRecordingRouter em /api/consultation-recordings
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 21:47:42.875906+00
Session table checked/created successfully
6:47:43 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
6:47:49 PM [tsx] change in ./server/utils/s3-upload.ts Restarting...
cAuthRouter carregado - rotas dispon√≠veis:
- POST /register
- POST /login
- POST /test
- GET /user (verifica√ß√£o de autentica√ß√£o)
AWS SDK n√£o dispon√≠vel, S3 upload desabilitado
[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
üñºÔ∏è Configurando diret√≥rio de arquivos est√°ticos...
‚úÖ Arquivos est√°ticos servidos de: /Users/lucascanova/Documents/CNVidas 1.0/CNVidas-updated/public
Registrando authRouter em /api/auth
Registrando userRouter em /api/users
Registrando settingsRouter em /api/users/settings
Registrando userSettingsRouter em /api
Registrando adminRoutes em /api/admin
Registrando partnerRouter em /api/partners
Registrando doctorRouter em /api/doctors
Registrando notificationRouter em /api/notifications
Registrando checkoutTrackingRouter em /api
Registrando rotas p√∫blicas de m√©dicos em /api/doctors
Registrando rotas p√∫blicas de servi√ßos em /api/services
Registrando legalDocumentsRouter em /api/legal-documents
Registrando chatRouter em /api/chat
Registrando medicalRecordsRouter em /api/medical-records
Registrando medicalRecordsAIRouter em /api/medical-records-ai
Registrando consultationRecordingRouter em /api/consultation-recordings
Conex√£o com o banco de dados testada com sucesso: 2025-06-14 21:47:50.485534+00
Session table checked/created successfully
6:47:50 PM [server] Servidor rodando na porta 8080
Acesse: http://localhost:8080
Ou: http://127.0.0.1:8080
üïê Configurando jobs agendados...
‚ö†Ô∏è node-cron n√£o est√° instalado. Jobs agendados desabilitados.
Para habilitar, execute: npm install node-cron
Configura√ß√£o de email carregada. Servi√ßo de email dispon√≠vel.
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  __stripe_mid: '24ca1cc5-2aab-4f55-8d40-f0e05d93937f5035c1',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTMyNzg0LCJleHAiOjE3NTA1Mzc1ODR9.gg84LWcogC4d3QLLps9FIXHJHgQDeh4s_RS8IvVOVCY',
  __stripe_sid: '606bb664-1012-4279-944a-73b3aa12af22c10f5a'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 58,
  email: 'lucas.canova@hotmail.com',
  role: 'patient',
  iat: 1749932784,
  exp: 1750537584
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: lucas.canova@hotmail.com
üîç Buscando assinatura atual para usu√°rio lucas.canova@hotmail.com (ID: 58)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
‚ö†Ô∏è Arquivo de upload n√£o encontrado: /profiles/profile-1749872528273-906009943.jpg
üîÑ Redirecionando para imagem padr√£o: /profiles/profile-1749872528273-906009943.jpg
‚úÖ Notifications /unread-count - Contagem: 2
‚úÖ Assinatura encontrada:
   - ID: 1
   - Status: active
   - Plano: ultra_family
   - Data cria√ß√£o: Sun Jun 08 2025 20:10:30 GMT-0300 (Brasilia Standard Time)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /recent-activities
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Activities - Buscando atividades recentes do usu√°rio ID: 58
Total de consultas encontradas para usu√°rio 58: 0
Session table checked/created successfully
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
‚úÖ Activities - Atividades encontradas: 4
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
Total de consultas encontradas para usu√°rio 58: 0
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
‚ö†Ô∏è Arquivo de upload n√£o encontrado: /profile-1747951137232-694756185.jpg
üîÑ Redirecionando para imagem padr√£o: /profile-1747951137232-694756185.jpg
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
‚ö†Ô∏è Arquivo de upload n√£o encontrado: /profiles/doctor-profile-1749928468716-764016332.jpg
üîÑ Redirecionando para imagem padr√£o: /profiles/doctor-profile-1749928468716-764016332.jpg
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando claims para usu√°rio 58
Encontrados 0 claims
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  __stripe_mid: '24ca1cc5-2aab-4f55-8d40-f0e05d93937f5035c1',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTMyNzg0LCJleHAiOjE3NTA1Mzc1ODR9.gg84LWcogC4d3QLLps9FIXHJHgQDeh4s_RS8IvVOVCY',
  __stripe_sid: '606bb664-1012-4279-944a-73b3aa12af22c10f5a'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 58,
  email: 'lucas.canova@hotmail.com',
  role: 'patient',
  iat: 1749932784,
  exp: 1750537584
}
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: lucas.canova@hotmail.com
üîç Buscando assinatura atual para usu√°rio lucas.canova@hotmail.com (ID: 58)
‚úÖ Assinatura encontrada:
   - ID: 1
   - Status: active
   - Plano: ultra_family
   - Data cria√ß√£o: Sun Jun 08 2025 20:10:30 GMT-0300 (Brasilia Standard Time)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /recent-activities
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Activities - Buscando atividades recentes do usu√°rio ID: 58
Total de consultas encontradas para usu√°rio 58: 0
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
‚úÖ Activities - Atividades encontradas: 4
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  __stripe_mid: '24ca1cc5-2aab-4f55-8d40-f0e05d93937f5035c1',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTMyNzg0LCJleHAiOjE3NTA1Mzc1ODR9.gg84LWcogC4d3QLLps9FIXHJHgQDeh4s_RS8IvVOVCY',
  __stripe_sid: '606bb664-1012-4279-944a-73b3aa12af22c10f5a'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 58,
  email: 'lucas.canova@hotmail.com',
  role: 'patient',
  iat: 1749932784,
  exp: 1750537584
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: lucas.canova@hotmail.com
üîç Buscando assinatura atual para usu√°rio lucas.canova@hotmail.com (ID: 58)
‚úÖ Assinatura encontrada:
   - ID: 1
   - Status: active
   - Plano: ultra_family
   - Data cria√ß√£o: Sun Jun 08 2025 20:10:30 GMT-0300 (Brasilia Standard Time)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /settings
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para PUT /settings
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîß Salvando configura√ß√µes do usu√°rio 58: {
  notifications: undefined,
  privacy: {
    shareWithDoctors: true,
    shareWithPartners: true,
    shareFullMedicalHistory: true,
    allowAnonymizedDataUse: true,
    profileVisibility: 'contacts',
    allowConsultationRecording: true
  }
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /settings
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
Total de consultas encontradas para usu√°rio 58: 0
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç M√©dico selecionado para emerg√™ncia: {
  doctorId: 4,
  doctorUserId: 32,
  doctorName: 'Lucas Dickel Canova',
  availableForEmergency: true
}
üöÄ Criando sala de emerg√™ncia: emergency-58-1749938380535
‚û°Ô∏è Criando sala emergency-58-1749938380535 no Daily.co - API key: true
üîç Verificando se sala "emergency-58-1749938380535" j√° existe...
Sala "emergency-58-1749938380535" n√£o existe, ser√° criada
üÜï Criando nova sala "emergency-58-1749938380535" no Daily.co...
Payload para cria√ß√£o da sala: {"name":"emergency-58-1749938380535","properties":{"start_audio_off":false,"start_video_off":false,"enable_chat":true,"enable_screenshare":true,"enable_knocking":false,"enable_network_ui":true,"enable_prejoin_ui":false,"exp":1749941981}}
‚úÖ Sala "emergency-58-1749938380535" criada com sucesso
‚è≥ Aguardando primeira fase de propaga√ß√£o (5s)...
üîç Verificando se sala "emergency-58-1749938380535" j√° est√° acess√≠vel...
‚úÖ Sala "emergency-58-1749938380535" confirmada como acess√≠vel
‚è≥ Aguardando propaga√ß√£o adicional da sala...
Criando token para sala emergency-58-1749938380535
Verificando/criando sala emergency-58-1749938380535 antes de gerar token
‚û°Ô∏è Criando sala emergency-58-1749938380535 no Daily.co - API key: true
üîç Verificando se sala "emergency-58-1749938380535" j√° existe...
‚úÖ Sala "emergency-58-1749938380535" j√° existe no Daily.co
Sala emergency-58-1749938380535 verificada/criada com sucesso
Solicitando token com propriedades: {
  room_name: 'emergency-58-1749938380535',
  user_id: '58',
  user_name: 'Lucas Dickel Canova',
  exp: 1749945590,
  is_owner: false,
  enable_screenshare: true,
  start_video_off: false,
  start_audio_off: false
}
Token simplificado criado com sucesso: eyJhbGciOiJIUzI...
‚úÖ Consulta de emerg√™ncia criada: {
  appointmentId: 114,
  doctorId: 4,
  userId: 58,
  status: 'waiting',
  isEmergency: true,
  type: 'telemedicine'
}
Consulta de emerg√™ncia iniciada: Paciente Lucas Dickel Canova (ID: 58) com Dr. Lucas Dickel Canova (ID: 4), Sala: emergency-58-1749938380535
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üìã Consulta de emerg√™ncia 114 consultada por paciente 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  __stripe_mid: '24ca1cc5-2aab-4f55-8d40-f0e05d93937f5035c1',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTMyNzg0LCJleHAiOjE3NTA1Mzc1ODR9.gg84LWcogC4d3QLLps9FIXHJHgQDeh4s_RS8IvVOVCY',
  __stripe_sid: '606bb664-1012-4279-944a-73b3aa12af22c10f5a'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 58,
  email: 'lucas.canova@hotmail.com',
  role: 'patient',
  iat: 1749932784,
  exp: 1750537584
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: lucas.canova@hotmail.com
üîç Buscando assinatura atual para usu√°rio lucas.canova@hotmail.com (ID: 58)
‚úÖ Assinatura encontrada:
   - ID: 1
   - Status: active
   - Plano: ultra_family
   - Data cria√ß√£o: Sun Jun 08 2025 20:10:30 GMT-0300 (Brasilia Standard Time)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /recent-activities
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Activities - Buscando atividades recentes do usu√°rio ID: 58
‚úÖ Activities - Atividades encontradas: 5
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  __stripe_mid: '24ca1cc5-2aab-4f55-8d40-f0e05d93937f5035c1',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTMyNzg0LCJleHAiOjE3NTA1Mzc1ODR9.gg84LWcogC4d3QLLps9FIXHJHgQDeh4s_RS8IvVOVCY',
  __stripe_sid: '606bb664-1012-4279-944a-73b3aa12af22c10f5a'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 58,
  email: 'lucas.canova@hotmail.com',
  role: 'patient',
  iat: 1749932784,
  exp: 1750537584
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: lucas.canova@hotmail.com
üîç Buscando assinatura atual para usu√°rio lucas.canova@hotmail.com (ID: 58)
‚úÖ Assinatura encontrada:
   - ID: 1
   - Status: active
   - Plano: ultra_family
   - Data cria√ß√£o: Sun Jun 08 2025 20:10:30 GMT-0300 (Brasilia Standard Time)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
Total de consultas encontradas para usu√°rio 58: 0
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando claims para usu√°rio 58
Encontrados 0 claims
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 58
‚úÖ Notifications /unread-count - Contagem: 2
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  __stripe_mid: '24ca1cc5-2aab-4f55-8d40-f0e05d93937f5035c1',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTMyNzg0LCJleHAiOjE3NTA1Mzc1ODR9.gg84LWcogC4d3QLLps9FIXHJHgQDeh4s_RS8IvVOVCY',
  __stripe_sid: '606bb664-1012-4279-944a-73b3aa12af22c10f5a'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 58,
  email: 'lucas.canova@hotmail.com',
  role: 'patient',
  iat: 1749932784,
  exp: 1750537584
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: lucas.canova@hotmail.com
üîç Buscando assinatura atual para usu√°rio lucas.canova@hotmail.com (ID: 58)
‚úÖ Assinatura encontrada:
   - ID: 1
   - Status: active
   - Plano: ultra_family
   - Data cria√ß√£o: Sun Jun 08 2025 20:10:30 GMT-0300 (Brasilia Standard Time)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /recent-activities
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Activities - Buscando atividades recentes do usu√°rio ID: 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
Total de consultas encontradas para usu√°rio 58: 0
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
‚úÖ Activities - Atividades encontradas: 4
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
Total de consultas encontradas para usu√°rio 58: 0
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç M√©dico selecionado para emerg√™ncia: {
  doctorId: 4,
  doctorUserId: 32,
  doctorName: 'Lucas Dickel Canova',
  availableForEmergency: true
}
üöÄ Criando sala de emerg√™ncia: emergency-58-1749939236268
‚û°Ô∏è Criando sala emergency-58-1749939236268 no Daily.co - API key: true
üîç Verificando se sala "emergency-58-1749939236268" j√° existe...
Sala "emergency-58-1749939236268" n√£o existe, ser√° criada
üÜï Criando nova sala "emergency-58-1749939236268" no Daily.co...
Payload para cria√ß√£o da sala: {"name":"emergency-58-1749939236268","properties":{"start_audio_off":false,"start_video_off":false,"enable_chat":true,"enable_screenshare":true,"enable_knocking":false,"enable_network_ui":true,"enable_prejoin_ui":false,"exp":1749942836}}
‚úÖ Sala "emergency-58-1749939236268" criada com sucesso
‚è≥ Aguardando primeira fase de propaga√ß√£o (5s)...
üîç Verificando se sala "emergency-58-1749939236268" j√° est√° acess√≠vel...
‚úÖ Sala "emergency-58-1749939236268" confirmada como acess√≠vel
‚è≥ Aguardando propaga√ß√£o adicional da sala...
Criando token para sala emergency-58-1749939236268
Verificando/criando sala emergency-58-1749939236268 antes de gerar token
‚û°Ô∏è Criando sala emergency-58-1749939236268 no Daily.co - API key: true
üîç Verificando se sala "emergency-58-1749939236268" j√° existe...
‚úÖ Sala "emergency-58-1749939236268" j√° existe no Daily.co
Sala emergency-58-1749939236268 verificada/criada com sucesso
Solicitando token com propriedades: {
  room_name: 'emergency-58-1749939236268',
  user_id: '58',
  user_name: 'Lucas Dickel Canova',
  exp: 1749946445,
  is_owner: false,
  enable_screenshare: true,
  start_video_off: false,
  start_audio_off: false
}
Token simplificado criado com sucesso: eyJhbGciOiJIUzI...
‚úÖ Consulta de emerg√™ncia criada: {
  appointmentId: 115,
  doctorId: 4,
  userId: 58,
  status: 'waiting',
  isEmergency: true,
  type: 'telemedicine'
}
Consulta de emerg√™ncia iniciada: Paciente Lucas Dickel Canova (ID: 58) com Dr. Lucas Dickel Canova (ID: 4), Sala: emergency-58-1749939236268
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üìã Consulta de emerg√™ncia 115 consultada por paciente 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  __stripe_mid: '24ca1cc5-2aab-4f55-8d40-f0e05d93937f5035c1',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTMyNzg0LCJleHAiOjE3NTA1Mzc1ODR9.gg84LWcogC4d3QLLps9FIXHJHgQDeh4s_RS8IvVOVCY',
  __stripe_sid: '606bb664-1012-4279-944a-73b3aa12af22c10f5a'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 58,
  email: 'lucas.canova@hotmail.com',
  role: 'patient',
  iat: 1749932784,
  exp: 1750537584
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: lucas.canova@hotmail.com
üîç Buscando assinatura atual para usu√°rio lucas.canova@hotmail.com (ID: 58)
‚úÖ Notifications /unread-count - Contagem: 2
‚úÖ Assinatura encontrada:
   - ID: 1
   - Status: active
   - Plano: ultra_family
   - Data cria√ß√£o: Sun Jun 08 2025 20:10:30 GMT-0300 (Brasilia Standard Time)
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /recent-activities
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Activities - Buscando atividades recentes do usu√°rio ID: 58
Total de consultas encontradas para usu√°rio 58: 1
Consulta ID: 115, Status: waiting, Date: 2025-06-14T22:14:06.160Z
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
‚úÖ Activities - Atividades encontradas: 5
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
Total de consultas encontradas para usu√°rio 58: 1
Consulta ID: 115, Status: waiting, Date: 2025-06-14T22:14:06.160Z
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç M√©dico selecionado para emerg√™ncia: {
  doctorId: 4,
  doctorUserId: 32,
  doctorName: 'Lucas Dickel Canova',
  availableForEmergency: true
}
üöÄ Criando sala de emerg√™ncia: emergency-58-1749939637574
‚û°Ô∏è Criando sala emergency-58-1749939637574 no Daily.co - API key: true
üîç Verificando se sala "emergency-58-1749939637574" j√° existe...
Sala "emergency-58-1749939637574" n√£o existe, ser√° criada
üÜï Criando nova sala "emergency-58-1749939637574" no Daily.co...
Payload para cria√ß√£o da sala: {"name":"emergency-58-1749939637574","properties":{"start_audio_off":false,"start_video_off":false,"enable_chat":true,"enable_screenshare":true,"enable_knocking":false,"enable_network_ui":true,"enable_prejoin_ui":false,"exp":1749943238}}
‚úÖ Sala "emergency-58-1749939637574" criada com sucesso
‚è≥ Aguardando primeira fase de propaga√ß√£o (5s)...
üîç Verificando se sala "emergency-58-1749939637574" j√° est√° acess√≠vel...
‚úÖ Sala "emergency-58-1749939637574" confirmada como acess√≠vel
‚è≥ Aguardando propaga√ß√£o adicional da sala...
Criando token para sala emergency-58-1749939637574
Verificando/criando sala emergency-58-1749939637574 antes de gerar token
‚û°Ô∏è Criando sala emergency-58-1749939637574 no Daily.co - API key: true
üîç Verificando se sala "emergency-58-1749939637574" j√° existe...
‚úÖ Sala "emergency-58-1749939637574" j√° existe no Daily.co
Sala emergency-58-1749939637574 verificada/criada com sucesso
Solicitando token com propriedades: {
  room_name: 'emergency-58-1749939637574',
  user_id: '58',
  user_name: 'Lucas Dickel Canova',
  exp: 1749946847,
  is_owner: false,
  enable_screenshare: true,
  start_video_off: false,
  start_audio_off: false
}
Token simplificado criado com sucesso: eyJhbGciOiJIUzI...
‚úÖ Consulta de emerg√™ncia criada: {
  appointmentId: 116,
  doctorId: 4,
  userId: 58,
  status: 'waiting',
  isEmergency: true,
  type: 'telemedicine'
}
Consulta de emerg√™ncia iniciada: Paciente Lucas Dickel Canova (ID: 58) com Dr. Lucas Dickel Canova (ID: 4), Sala: emergency-58-1749939637574
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üìã Consulta de emerg√™ncia 116 consultada por paciente 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
‚úÖ Notifications /unread-count - Contagem: 2
Total de consultas encontradas para usu√°rio 58: 2
Consulta ID: 115, Status: waiting, Date: 2025-06-14T22:14:06.160Z
Consulta ID: 116, Status: waiting, Date: 2025-06-14T22:20:47.471Z
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç M√©dico selecionado para emerg√™ncia: {
  doctorId: 4,
  doctorUserId: 32,
  doctorName: 'Lucas Dickel Canova',
  availableForEmergency: true
}
üöÄ Criando sala de emerg√™ncia: emergency-58-1749941309345
‚û°Ô∏è Criando sala emergency-58-1749941309345 no Daily.co - API key: true
üîç Verificando se sala "emergency-58-1749941309345" j√° existe...
Sala "emergency-58-1749941309345" n√£o existe, ser√° criada
üÜï Criando nova sala "emergency-58-1749941309345" no Daily.co...
Payload para cria√ß√£o da sala: {"name":"emergency-58-1749941309345","properties":{"start_audio_off":false,"start_video_off":false,"enable_chat":true,"enable_screenshare":true,"enable_knocking":false,"enable_network_ui":true,"enable_prejoin_ui":false,"exp":1749944909}}
‚úÖ Sala "emergency-58-1749941309345" criada com sucesso
‚è≥ Aguardando primeira fase de propaga√ß√£o (5s)...
üîç Verificando se sala "emergency-58-1749941309345" j√° est√° acess√≠vel...
‚úÖ Sala "emergency-58-1749941309345" confirmada como acess√≠vel
‚è≥ Aguardando propaga√ß√£o adicional da sala...
Criando token para sala emergency-58-1749941309345
Verificando/criando sala emergency-58-1749941309345 antes de gerar token
‚û°Ô∏è Criando sala emergency-58-1749941309345 no Daily.co - API key: true
üîç Verificando se sala "emergency-58-1749941309345" j√° existe...
‚úÖ Sala "emergency-58-1749941309345" j√° existe no Daily.co
Sala emergency-58-1749941309345 verificada/criada com sucesso
Solicitando token com propriedades: {
  room_name: 'emergency-58-1749941309345',
  user_id: '58',
  user_name: 'Lucas Dickel Canova',
  exp: 1749948519,
  is_owner: false,
  enable_screenshare: true,
  start_video_off: false,
  start_audio_off: false
}
Token simplificado criado com sucesso: eyJhbGciOiJIUzI...
‚úÖ Consulta de emerg√™ncia criada: {
  appointmentId: 117,
  doctorId: 4,
  userId: 58,
  status: 'waiting',
  isEmergency: true,
  type: 'telemedicine'
}
Consulta de emerg√™ncia iniciada: Paciente Lucas Dickel Canova (ID: 58) com Dr. Lucas Dickel Canova (ID: 4), Sala: emergency-58-1749941309345
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üìã Consulta de emerg√™ncia 117 consultada por paciente 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
‚ö†Ô∏è Arquivo de upload n√£o encontrado: /profiles/profile-1749872528273-906009943.jpg
üîÑ Redirecionando para imagem padr√£o: /profiles/profile-1749872528273-906009943.jpg
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
‚ö†Ô∏è Arquivo de upload n√£o encontrado: /profiles/doctor-profile-1749928468716-764016332.jpg
üîÑ Redirecionando para imagem padr√£o: /profiles/doctor-profile-1749928468716-764016332.jpg
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
‚ö†Ô∏è Arquivo de upload n√£o encontrado: /profile-1747951137232-694756185.jpg
üîÑ Redirecionando para imagem padr√£o: /profile-1747951137232-694756185.jpg
Total de consultas encontradas para usu√°rio 58: 3
Consulta ID: 115, Status: waiting, Date: 2025-06-14T22:14:06.160Z
Consulta ID: 116, Status: waiting, Date: 2025-06-14T22:20:47.471Z
Consulta ID: 117, Status: waiting, Date: 2025-06-14T22:48:39.218Z
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç M√©dico selecionado para emerg√™ncia: {
  doctorId: 4,
  doctorUserId: 32,
  doctorName: 'Lucas Dickel Canova',
  availableForEmergency: true
}
üöÄ Criando sala de emerg√™ncia: emergency-58-1749941505356
‚û°Ô∏è Criando sala emergency-58-1749941505356 no Daily.co - API key: true
üîç Verificando se sala "emergency-58-1749941505356" j√° existe...
Sala "emergency-58-1749941505356" n√£o existe, ser√° criada
üÜï Criando nova sala "emergency-58-1749941505356" no Daily.co...
Payload para cria√ß√£o da sala: {"name":"emergency-58-1749941505356","properties":{"start_audio_off":false,"start_video_off":false,"enable_chat":true,"enable_screenshare":true,"enable_knocking":false,"enable_network_ui":true,"enable_prejoin_ui":false,"exp":1749945105}}
‚úÖ Sala "emergency-58-1749941505356" criada com sucesso
‚è≥ Aguardando primeira fase de propaga√ß√£o (5s)...
üîç Verificando se sala "emergency-58-1749941505356" j√° est√° acess√≠vel...
‚úÖ Sala "emergency-58-1749941505356" confirmada como acess√≠vel
‚è≥ Aguardando propaga√ß√£o adicional da sala...
Criando token para sala emergency-58-1749941505356
Verificando/criando sala emergency-58-1749941505356 antes de gerar token
‚û°Ô∏è Criando sala emergency-58-1749941505356 no Daily.co - API key: true
üîç Verificando se sala "emergency-58-1749941505356" j√° existe...
‚úÖ Sala "emergency-58-1749941505356" j√° existe no Daily.co
Sala emergency-58-1749941505356 verificada/criada com sucesso
Solicitando token com propriedades: {
  room_name: 'emergency-58-1749941505356',
  user_id: '58',
  user_name: 'Lucas Dickel Canova',
  exp: 1749948715,
  is_owner: false,
  enable_screenshare: true,
  start_video_off: false,
  start_audio_off: false
}
Token simplificado criado com sucesso: eyJhbGciOiJIUzI...
‚úÖ Consulta de emerg√™ncia criada: {
  appointmentId: 118,
  doctorId: 4,
  userId: 58,
  status: 'waiting',
  isEmergency: true,
  type: 'telemedicine'
}
Consulta de emerg√™ncia iniciada: Paciente Lucas Dickel Canova (ID: 58) com Dr. Lucas Dickel Canova (ID: 4), Sala: emergency-58-1749941505356
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üìã Consulta de emerg√™ncia 118 consultada por paciente 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
Criando sala test-diagnostic-1749941533835 diretamente no Daily.co
Sala test-diagnostic-1749941533835 criada com sucesso: {
  id: 'c94b2f06-9ec2-49f6-9cae-8b51ec7d9a35',
  name: 'test-diagnostic-1749941533835',
  api_created: true,
  privacy: 'public',
  url: 'https://cnvidas.daily.co/test-diagnostic-1749941533835',
  created_at: '2025-06-14T22:52:14.000Z',
  config: { exp: 1749945134, enable_chat: true }
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
Verificando exist√™ncia da sala emergency-58-1749941505356 no Daily.co
Sala emergency-58-1749941505356 existe no Daily.co: {
  id: '2bb1ef78-01e8-431c-81a1-fe2f2f7a66b0',
  name: 'emergency-58-1749941505356',
  api_created: true,
  privacy: 'public',
  url: 'https://cnvidas.daily.co/emergency-58-1749941505356',
  created_at: '2025-06-14T22:51:46.000Z',
  config: {
    exp: 1749945105,
    enable_chat: true,
    enable_knocking: false,
    enable_network_ui: true,
    enable_prejoin_ui: false
  }
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
Gerando token para sala emergency-58-1749941505356 com usu√°rio Diagnostic Test
Token gerado com sucesso para sala emergency-58-1749941505356
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
Total de consultas encontradas para usu√°rio 58: 4
Consulta ID: 115, Status: waiting, Date: 2025-06-14T22:14:06.160Z
Consulta ID: 116, Status: waiting, Date: 2025-06-14T22:20:47.471Z
Consulta ID: 117, Status: waiting, Date: 2025-06-14T22:48:39.218Z
Consulta ID: 118, Status: waiting, Date: 2025-06-14T22:51:55.400Z
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
‚úÖ Notifications /unread-count - Contagem: 2
Total de consultas encontradas para usu√°rio 58: 4
Consulta ID: 115, Status: waiting, Date: 2025-06-14T22:14:06.160Z
Consulta ID: 116, Status: waiting, Date: 2025-06-14T22:20:47.471Z
Consulta ID: 117, Status: waiting, Date: 2025-06-14T22:48:39.218Z
Consulta ID: 118, Status: waiting, Date: 2025-06-14T22:51:55.400Z
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
‚úÖ Notifications /unread-count - Contagem: 2
Total de consultas encontradas para usu√°rio 58: 4
Consulta ID: 115, Status: waiting, Date: 2025-06-14T22:14:06.160Z
Consulta ID: 116, Status: waiting, Date: 2025-06-14T22:20:47.471Z
Consulta ID: 117, Status: waiting, Date: 2025-06-14T22:48:39.218Z
Consulta ID: 118, Status: waiting, Date: 2025-06-14T22:51:55.400Z
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç M√©dico selecionado para emerg√™ncia: {
  doctorId: 4,
  doctorUserId: 32,
  doctorName: 'Lucas Dickel Canova',
  availableForEmergency: true
}
üöÄ Criando sala de emerg√™ncia: emergency-58-1749941820538
‚û°Ô∏è Criando sala emergency-58-1749941820538 no Daily.co - API key: true
üîç Verificando se sala "emergency-58-1749941820538" j√° existe...
Sala "emergency-58-1749941820538" n√£o existe, ser√° criada
üÜï Criando nova sala "emergency-58-1749941820538" no Daily.co...
Payload para cria√ß√£o da sala: {"name":"emergency-58-1749941820538","properties":{"start_audio_off":false,"start_video_off":false,"enable_chat":true,"enable_screenshare":true,"enable_knocking":false,"enable_network_ui":true,"enable_prejoin_ui":false,"exp":1749945421}}
‚úÖ Sala "emergency-58-1749941820538" criada com sucesso
‚è≥ Aguardando primeira fase de propaga√ß√£o (5s)...
üîç Verificando se sala "emergency-58-1749941820538" j√° est√° acess√≠vel...
‚úÖ Sala "emergency-58-1749941820538" confirmada como acess√≠vel
‚è≥ Aguardando propaga√ß√£o adicional da sala...
Criando token para sala emergency-58-1749941820538
Verificando/criando sala emergency-58-1749941820538 antes de gerar token
‚û°Ô∏è Criando sala emergency-58-1749941820538 no Daily.co - API key: true
üîç Verificando se sala "emergency-58-1749941820538" j√° existe...
‚úÖ Sala "emergency-58-1749941820538" j√° existe no Daily.co
Sala emergency-58-1749941820538 verificada/criada com sucesso
Solicitando token com propriedades: {
  room_name: 'emergency-58-1749941820538',
  user_id: '58',
  user_name: 'Lucas Dickel Canova',
  exp: 1749949030,
  is_owner: false,
  enable_screenshare: true,
  start_video_off: false,
  start_audio_off: false
}
Token simplificado criado com sucesso: eyJhbGciOiJIUzI...
‚úÖ Consulta de emerg√™ncia criada: {
  appointmentId: 119,
  doctorId: 4,
  userId: 58,
  status: 'waiting',
  isEmergency: true,
  type: 'telemedicine'
}
Consulta de emerg√™ncia iniciada: Paciente Lucas Dickel Canova (ID: 58) com Dr. Lucas Dickel Canova (ID: 4), Sala: emergency-58-1749941820538
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üìã Consulta de emerg√™ncia 119 consultada por paciente 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîç Middleware JWT Global - Processando: /api/subscription/current
üîç Cookies: {
  __stripe_mid: '24ca1cc5-2aab-4f55-8d40-f0e05d93937f5035c1',
  auth_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjU4LCJlbWFpbCI6Imx1Y2FzLmNhbm92YUBob3RtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiaWF0IjoxNzQ5OTMyNzg0LCJleHAiOjE3NTA1Mzc1ODR9.gg84LWcogC4d3QLLps9FIXHJHgQDeh4s_RS8IvVOVCY',
  __stripe_sid: '606bb664-1012-4279-944a-73b3aa12af22c10f5a'
}
üîç Headers auth: undefined
üîç Header x-auth-token: undefined
üîç Verificando cookie auth_token: eyJhbGciOiJIUzI1NiIs...
üîç Cookie decodificado: {
  userId: 58,
  email: 'lucas.canova@hotmail.com',
  role: 'patient',
  iat: 1749932784,
  exp: 1750537584
}
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç Final do middleware - Usu√°rio autenticado? true
Verificando autentica√ß√£o na rota de assinatura...
‚úÖ Usu√°rio autenticado: lucas.canova@hotmail.com
üîç Buscando assinatura atual para usu√°rio lucas.canova@hotmail.com (ID: 58)
Total de consultas encontradas para usu√°rio 58: 0
‚úÖ Assinatura encontrada:
   - ID: 1
   - Status: active
   - Plano: ultra_family
   - Data cria√ß√£o: Sun Jun 08 2025 20:10:30 GMT-0300 (Brasilia Standard Time)
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /recent-activities
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Activities - Buscando atividades recentes do usu√°rio ID: 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
Total de consultas encontradas para usu√°rio 58: 0
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
‚úÖ Activities - Atividades encontradas: 4
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç M√©dico selecionado para emerg√™ncia: {
  doctorId: 4,
  doctorUserId: 32,
  doctorName: 'Lucas Dickel Canova',
  availableForEmergency: true
}
üöÄ Criando sala de emerg√™ncia: emergency-58-1749942018453
‚û°Ô∏è Criando sala emergency-58-1749942018453 no Daily.co - API key: true
üîç Verificando se sala "emergency-58-1749942018453" j√° existe...
Sala "emergency-58-1749942018453" n√£o existe, ser√° criada
üÜï Criando nova sala "emergency-58-1749942018453" no Daily.co...
Payload para cria√ß√£o da sala: {"name":"emergency-58-1749942018453","properties":{"start_audio_off":false,"start_video_off":false,"enable_chat":true,"enable_screenshare":true,"enable_knocking":false,"enable_network_ui":true,"enable_prejoin_ui":false,"exp":1749945619}}
‚úÖ Sala "emergency-58-1749942018453" criada com sucesso
‚è≥ Aguardando primeira fase de propaga√ß√£o (5s)...
üîç Verificando se sala "emergency-58-1749942018453" j√° est√° acess√≠vel...
‚úÖ Sala "emergency-58-1749942018453" confirmada como acess√≠vel
‚è≥ Aguardando propaga√ß√£o adicional da sala...
Criando token para sala emergency-58-1749942018453
Verificando/criando sala emergency-58-1749942018453 antes de gerar token
‚û°Ô∏è Criando sala emergency-58-1749942018453 no Daily.co - API key: true
üîç Verificando se sala "emergency-58-1749942018453" j√° existe...
‚úÖ Sala "emergency-58-1749942018453" j√° existe no Daily.co
Sala emergency-58-1749942018453 verificada/criada com sucesso
Solicitando token com propriedades: {
  room_name: 'emergency-58-1749942018453',
  user_id: '58',
  user_name: 'Lucas Dickel Canova',
  exp: 1749949228,
  is_owner: false,
  enable_screenshare: true,
  start_video_off: false,
  start_audio_off: false
}
Token simplificado criado com sucesso: eyJhbGciOiJIUzI...
‚úÖ Consulta de emerg√™ncia criada: {
  appointmentId: 120,
  doctorId: 4,
  userId: 58,
  status: 'waiting',
  isEmergency: true,
  type: 'telemedicine'
}
Consulta de emerg√™ncia iniciada: Paciente Lucas Dickel Canova (ID: 58) com Dr. Lucas Dickel Canova (ID: 4), Sala: emergency-58-1749942018453
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üìã Consulta de emerg√™ncia 120 consultada por paciente 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
Total de consultas encontradas para usu√°rio 58: 1
Consulta ID: 120, Status: waiting, Date: 2025-06-14T23:00:28.451Z
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
‚úÖ Notifications /unread-count - Contagem: 2
Total de consultas encontradas para usu√°rio 58: 1
Consulta ID: 120, Status: waiting, Date: 2025-06-14T23:00:28.451Z
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîç M√©dico selecionado para emerg√™ncia: {
  doctorId: 4,
  doctorUserId: 32,
  doctorName: 'Lucas Dickel Canova',
  availableForEmergency: true
}
üöÄ Criando sala de emerg√™ncia: emergency-58-1749942250307
‚û°Ô∏è Criando sala emergency-58-1749942250307 no Daily.co - API key: true
üîç Verificando se sala "emergency-58-1749942250307" j√° existe...
Sala "emergency-58-1749942250307" n√£o existe, ser√° criada
üÜï Criando nova sala "emergency-58-1749942250307" no Daily.co...
Payload para cria√ß√£o da sala: {"name":"emergency-58-1749942250307","properties":{"start_audio_off":false,"start_video_off":false,"enable_chat":true,"enable_screenshare":true,"enable_knocking":false,"enable_network_ui":true,"enable_prejoin_ui":false,"exp":1749945850}}
‚úÖ Sala "emergency-58-1749942250307" criada com sucesso
‚è≥ Aguardando primeira fase de propaga√ß√£o (5s)...
üîç Verificando se sala "emergency-58-1749942250307" j√° est√° acess√≠vel...
‚úÖ Sala "emergency-58-1749942250307" confirmada como acess√≠vel
‚è≥ Aguardando propaga√ß√£o adicional da sala...
Criando token para sala emergency-58-1749942250307
Verificando/criando sala emergency-58-1749942250307 antes de gerar token
‚û°Ô∏è Criando sala emergency-58-1749942250307 no Daily.co - API key: true
üîç Verificando se sala "emergency-58-1749942250307" j√° existe...
‚úÖ Sala "emergency-58-1749942250307" j√° existe no Daily.co
Sala emergency-58-1749942250307 verificada/criada com sucesso
Solicitando token com propriedades: {
  room_name: 'emergency-58-1749942250307',
  user_id: '58',
  user_name: 'Lucas Dickel Canova',
  exp: 1749949459,
  is_owner: false,
  enable_screenshare: true,
  start_video_off: false,
  start_audio_off: false
}
Token simplificado criado com sucesso: eyJhbGciOiJIUzI...
‚úÖ Consulta de emerg√™ncia criada: {
  appointmentId: 121,
  doctorId: 4,
  userId: 58,
  status: 'waiting',
  isEmergency: true,
  type: 'telemedicine'
}
Consulta de emerg√™ncia iniciada: Paciente Lucas Dickel Canova (ID: 58) com Dr. Lucas Dickel Canova (ID: 4), Sala: emergency-58-1749942250307
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üìã Consulta de emerg√™ncia 121 consultada por paciente 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
Total de consultas encontradas para usu√°rio 58: 2
Consulta ID: 120, Status: waiting, Date: 2025-06-14T23:00:28.451Z
Consulta ID: 121, Status: waiting, Date: 2025-06-14T23:04:20.184Z
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
=== ROTA /api/user INTERCEPTADA ===
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /unread-count
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
üîç Notifications /unread-count - Buscando contagem para usu√°rio ID: 58
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê JWT: Usu√°rio lucas.canova@hotmail.com autenticado via cookie com plano ultra_family
üîê requireAuth - Verificando autentica√ß√£o para GET /upcoming
üîê requireAuth - req.user: 58 (patient)
‚úÖ requireAuth - Usu√°rio autenticado: 58 (patient)
Buscando consultas pr√≥ximas para usu√°rio 58
‚úÖ Notifications /unread-count - Contagem: 2
Total de consultas encontradas para usu√°rio 58: 2
Consulta ID: 120, Status: waiting, Date: 2025-06-14T23:00:28.451Z
Consulta ID: 121, Status: waiting, Date: 2025-06-14T23:04:20.184Z
Consultas ap√≥s filtrar canceladas: 0
Encontradas 0 consultas pr√≥ximas
Consultas retornadas: []
